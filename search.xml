<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>threejså®ç°ç®€å•å…¨æ™¯çœ‹æˆ¿demo</title>
      <link href="/posts/69577cfd/"/>
      <url>/posts/69577cfd/</url>
      
        <content type="html"><![CDATA[<p>å„ä½å¤§å®¶å¥½ğŸ˜Šï¼Œæœ€è¿‘ä¸€ç›´åœ¨å­¦ä¹  <strong>threejs</strong> ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¸æ–­è¿›æ­¥ï¼Œåœ¨å°†æ¥æˆ‘ä¼šä¸æ–­å®Œå–„æˆ‘çš„ <strong>threejs</strong> æ¡ˆä¾‹åº“ï¼Œå¸Œæœ›èƒ½åœ¨å­¦ä¹ è·¯ä¸Šå¸®åˆ°å¤§å®¶ğŸŒ¹</p><p>æ¥ä¸‹æ¥ä¸ºå„ä½ä»‹ç»çš„æ˜¯ä¸€ä¸ªå…¨æ™¯çœ‹æˆ¿çš„demoï¼Œæˆ‘ä»¬å…ˆä¸Šåœ°å€ï¼š</p><ul><li>æºç åœ°å€ï¼š<a href="https://github.com/ljnMeow/360-house-viewing.git">https://github.com/ljnMeow/360-house-viewing.git</a></li><li>é¢„è§ˆåœ°å€ï¼š<a href="https://ljnmeow.github.io/360-house-viewing/dist">https://ljnmeow.github.io/360-house-viewing/dist</a></li><li>å…¨æ™¯å›¾åˆ‡å‰²å·¥å…·ï¼š<a href="https://matheowis.github.io/HDRI-to-CubeMap/">https://matheowis.github.io/HDRI-to-CubeMap/</a></li></ul><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>threejs</strong> æ˜¯ <strong>javascript</strong> ç¼–å†™çš„ä¸€ä¸ª <strong>WebGL</strong> ç¬¬ä¸‰æ–¹åº“ã€‚åœ¨ <strong>threejs</strong> ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <strong>Scene(åœºæ™¯)</strong> ã€ <strong>Camera(ç›¸æœº)</strong> å’Œ <strong>Renderer(æ¸²æŸ“å™¨)</strong> æ¥å®ç°ä¸€ä¸ª3dçš„åœºæ™¯ï¼Œç„¶åå¾€é‡Œé¢æ·»åŠ å„ç§å…‰æºã€ç‰©ä½“ç­‰ç­‰ï¼Œå½¢æˆä¸€ä¸ª3dä¸–ç•Œã€‚</p><h2 id="threejsæ”¯æŒç¨‹åº¦"><a href="#threejsæ”¯æŒç¨‹åº¦" class="headerlink" title="threejsæ”¯æŒç¨‹åº¦"></a>threejsæ”¯æŒç¨‹åº¦</h2><p>å› ä¸º <strong>threejs</strong> æ˜¯åŸºäº <strong>webgl</strong> å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸»è¦çœ‹è®¾å¤‡æ˜¯å¦æ”¯æŒ <strong>webgl</strong> ã€‚æ®æˆ‘æ‰€çŸ¥ç›®å‰ä¸»æµæœ€æ–°ç‰ˆæœ¬çš„è®¾å¤‡ã€æµè§ˆå™¨éƒ½æ”¯æŒ <strong>webgl</strong>ï¼Œä½†å¦‚æœå®¢æœè¦åœ¨ä¸€äº›æ—©æœŸçš„è®¾å¤‡ä¸Šè·‘ï¼Œä¾‹å¦‚æŸäº›è¶…å¤§å±å¤§å±ç›‘æ§ç³»ç»Ÿï¼Œè·‘è¿™ä¸ªçš„è®¾å¤‡å¯èƒ½æ˜¯æ—©æœŸçš„ <strong>IE</strong> å¹¶ä¸”æ— æ³•å‡çº§ã€‚æˆ‘ä»¬è¿˜æ˜¯éœ€è¦æƒè¡¡ä¸‹æ—©æœŸ <strong>IE</strong> å’Œ å®‰å“ã€è‹¹æœè®¾å¤‡æ˜¯å¦æ”¯æŒ <strong>webgl</strong>ï¼Œ è¯¦æƒ…å¯è§ä¸‹å›¾ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73c7afd6ff494c28b1618909952636fc~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h1 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h1><p>è¦å®ç°3då›¾å½¢çš„å±•ç¤ºï¼Œå¤§è‡´æ˜¯ä»¥ä¸‹æ€è·¯ï¼š</p><ul><li>åˆ›å»ºä¸‰ç»´åœºæ™¯(Scene)</li><li>é€‰æ‹©è§†è§‰ç‚¹å¹¶ç¡®è®¤è§†è§‰ä½ç½®è§’åº¦(Camera)</li><li>æ·»åŠ ç‰©ä½“ä¾›è§‚å¯Ÿ</li><li>æ¸²æŸ“åœºæ™¯(Renderer)</li></ul><h2 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h2><p>åœºæ™¯æ˜¯æˆ‘ä»¬æ‰€æœ‰ç‰©ä½“çš„å®¹å™¨ï¼Œé€šä¿—æ¥è®²å°±ç›¸å½“äºæˆ‘ä»¬çš„ä¸–ç•Œ</p><h2 id="Camera"><a href="#Camera" class="headerlink" title="Camera"></a>Camera</h2><p>ç›¸æœºæ˜¯æˆ‘ä»¬è¿™ä¸ªä¸–ç•Œçš„è§‚å¯Ÿè€…ï¼Œä½¿ç”¨å³æ‰‹åæ ‡ç³»å®šä½</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd8fb7ed0d554a7a9c726fc869acc52c~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><strong>threejs</strong> å¸¸ç”¨çš„ç›¸æœºæœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ <strong>æ­£äº¤æŠ•å½±ç›¸æœº(OrthographicCamera)</strong> å’Œ <strong>é€è§†æŠ•å½±ç›¸æœº(PerspectiveCamera)</strong> ï¼Œä¸‹é¢æ˜¯æˆ‘å¯¹è¿™ä¸¤ç§æ–¹å¼çš„ç†è§£ï¼Œé”™äº†è¯·å„ä½å¤§ä½¬æŒ‡ç‚¹æˆ‘ä¸€ä¸‹ğŸ¤</p><h3 id="æ­£äº¤æŠ•å½±ç›¸æœº-OrthographicCamera"><a href="#æ­£äº¤æŠ•å½±ç›¸æœº-OrthographicCamera" class="headerlink" title="æ­£äº¤æŠ•å½±ç›¸æœº(OrthographicCamera)"></a>æ­£äº¤æŠ•å½±ç›¸æœº(OrthographicCamera)</h3><p>æ­£äº¤æŠ•å½±æ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„æŠ•å½±æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¯¥æ¨¡å¼çœ‹ä½œçœ‹ä½œä¸€ä¸ªé•¿æ–¹å½¢çŸ©å½¢ï¼Œæ€»å…±æœ‰6ä¸ªé¢ã€‚è¯¥æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯æ— è®ºå‡ºäºçŸ©å½¢ä¸­çš„å“ªä¸ªä½ç½®ï¼Œå…¶æŠ•å½±çš„å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šä¿—ç†è§£å°±æ˜¯è¯¥æ¨¡å¼è·Ÿå¸¸ç”Ÿæ´»ä¸­çš„è§†è§‰æ•ˆæœä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¹³æ—¶çœ‹ç‰©ä½“æ˜¯è¿œå°è¿‘å¤§ï¼Œè€Œè¯¥æ¨¡å¼ä¸‹å±•ç¤ºçš„ç‰©ä½“æ— è®ºç‰©ä½“è·ç¦»ç›¸æœºè·ç¦»è¿œæˆ–è€…è¿‘ï¼Œåœ¨æœ€ç»ˆæ¸²æŸ“çš„å›¾ç‰‡ä¸­ç‰©ä½“çš„å¤§å°éƒ½ä¿æŒä¸å˜ã€‚é€šè¿‡ä¸‹é¢å›¾ç‰‡èƒ½æ¸…æ¥šçœ‹åˆ°ï¼Œç›¸æœºè§†è§‰ä¸­çš„ç‰©ä½“æŠ•æ”¾åˆ°è¿›å¹³é¢ï¼Œç„¶åè¿‘å¹³é¢ä¸­çš„ç‰©ä½“æ¸²æŸ“åˆ°è¿œå¹³é¢ä¹Ÿå°±æ˜¯å±å¹•ä¸­ï¼Œå¹¶ä¸”æ— è®ºæŠ•æ”¾åœ¨å“ªä¸€é¢ï¼Œç‰©ä½“çš„å¤§å°éƒ½ä¸å˜ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee9400e7e1a64b7491b5aad97dbb6704~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h3 id="é€è§†æŠ•å½±ç›¸æœº-PerspectiveCamera"><a href="#é€è§†æŠ•å½±ç›¸æœº-PerspectiveCamera" class="headerlink" title="é€è§†æŠ•å½±ç›¸æœº(PerspectiveCamera)"></a>é€è§†æŠ•å½±ç›¸æœº(PerspectiveCamera)</h3><p>é€è§†æŠ•å½±çš„è§†è§‰æ•ˆæœå‘ˆç°ä¸€ä¸ªé”¥å½¢ï¼Œè¯¥æ¨¡å¼å°±æ˜¯æˆ‘ä»¬ç°å®ä¸–ç•Œä¸­çš„è§†è§‰ä½“ç°ã€‚è¯¥æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯ç‰©ä½“è¿œå°è¿‘å¤§ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/792dce4e31a14ab2bd0b5bb9026f3700~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>ç›¸æœºæ•ˆæœä½“éªŒåœ°å€åœ¨å®˜æ–¹demoä¸­æœ‰ï¼š<a href="https://threejs.org/examples/#webgl_camera">https://threejs.org/examples/#webgl_camera</a></p><h2 id="Renderer"><a href="#Renderer" class="headerlink" title="Renderer"></a>Renderer</h2><p>æ¸²æŸ“å™¨æ¸²æŸ“æˆ‘ä»¬ç²¾å¿ƒåˆ¶ä½œçš„åœºæ™¯</p><h1 id="è¿›å…¥æ­£é¢˜"><a href="#è¿›å…¥æ­£é¢˜" class="headerlink" title="è¿›å…¥æ­£é¢˜"></a>è¿›å…¥æ­£é¢˜</h1><p>æ ¹æ®æˆ‘çš„äº†è§£ç›®å‰å¸¸ç”¨äºå®ç°å…¨æ™¯çœ‹æˆ¿æ•ˆæœçš„æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ <strong>å¤©ç©ºç›’(skyBox)</strong> å’Œ <strong>å…¨æ™¯å›¾ç‰‡è´´å›¾</strong> ï¼Œæˆ‘è¿™ä¸ªdemoä½¿ç”¨çš„æ˜¯åè€…ã€‚</p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><h3 id="skyBox"><a href="#skyBox" class="headerlink" title="skyBox"></a>skyBox</h3><p><strong>skyBox</strong> æ–¹æ³•æ˜¯æœ€å®¹æ˜“ç†è§£çš„ï¼Œåœ¨æˆ‘ä»¬èº«å¤„çš„åœºæ™¯å†…ï¼Œæ— éå°±æ˜¯6ä¸ªé¢ï¼Œä¸Šä¸‹ã€å‰åã€å·¦å³ã€‚å°†è¿™6ä¸ªé¢çš„è§†è§‰å¤„ç†æˆå›¾ç‰‡å°±å¾—åˆ°6å¼ ä¸åŒæ–¹å‘è§†è§‰çš„å›¾ç‰‡ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e143d8cea7f466ab4f2917116551a84~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æˆ‘ä»¬å°†6ä¸ªè§†è§‰çš„å›¾ç‰‡è´´åˆ°ç«‹æ–¹ä½“çš„6ä¸ªé¢ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæˆ¿é—´ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">initContent() &#123;</span><br><span class="line">  let picList = [&quot;left&quot;, &quot;right&quot;, &quot;top&quot;, &quot;bottom&quot;, &quot;front&quot;, &quot;back&quot;];</span><br><span class="line">  let boxGeometry = new THREE.BoxGeometry(10, 10, 10);</span><br><span class="line">  let boxMaterials = [];</span><br><span class="line">  picList.forEach((item) =&gt; &#123;</span><br><span class="line">    let texture = new THREE.TextureLoader().load(</span><br><span class="line">      require(`@/assets/image/$&#123;item&#125;.png`)</span><br><span class="line">    );</span><br><span class="line">    boxMaterials.push(new THREE.MeshBasicMaterial(&#123; map: texture &#125;));</span><br><span class="line">  &#125;);</span><br><span class="line">  this.box = new THREE.Mesh(boxGeometry, boxMaterials);</span><br><span class="line">  this.scene.add(this.box);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/77fed458999b4348bb1fb5bf5794cf27~tplv-k3u1fbpfcp-watermark.image" alt="å±å¹•å½•åˆ¶2021-12-30 ä¸‹åˆ11.00.31.gif"></p><p>å°†è§†è§‰ç§»åˆ°ç«‹æ–¹ä½“ä¸­å¿ƒï¼Œå¹¶è®©è´´å›¾å†…ç¿»è½¬ä¸€ä¸‹ï¼Œå°±èƒ½å®ç°å…¨æ™¯çœ‹æˆ¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.box.geometry.scale(10, 10, -10);</span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/183faf80bd05437fac28de39c99985f2~tplv-k3u1fbpfcp-watermark.image" alt="å±å¹•å½•åˆ¶2021-12-30 ä¸‹åˆ11.11.50.gif"></p><h3 id="å…¨æ™¯å›¾è´´å›¾"><a href="#å…¨æ™¯å›¾è´´å›¾" class="headerlink" title="å…¨æ™¯å›¾è´´å›¾"></a>å…¨æ™¯å›¾è´´å›¾</h3><p>å…¨æ™¯å›¾è´´å›¾è¿™ç§æ–¹å¼æˆ‘è®¤ä¸ºæ˜¯ç®€å•è€Œä¸”æ•ˆæœæœ€å¥½çš„ä¸€ç§ã€‚å†™ä¹‹å‰éœ€è¦ä¸€å¼ å…¨æ™¯å›¾ç‰‡ï¼Œè¿™ä¸ªç”¨å•åçš„å…¨æ™¯æ¨¡å¼å°±èƒ½æ‹ä¸€å¼ </p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d07d7698264f42028dc226077995faae~tplv-k3u1fbpfcp-watermark.image" alt="livingRoom.jpg"></p><p><strong>threejs</strong> æ·»åŠ ä¸€ä¸ªçƒä½“ã€‚å¹¶æŠŠå…¨æ™¯å›¾ä½œä¸ºè´´å›¾è´´åˆ°çƒä½“ä¸Šï¼Œå¾—åˆ°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">initContent() &#123;</span><br><span class="line">  let sphereGeometry = new THREE.SphereGeometry(16, 50, 50);</span><br><span class="line">  let texture = new THREE.TextureLoader().load(require(&quot;@/assets/image/livingRoom.jpg&quot;));</span><br><span class="line">  let sphereMaterial = new THREE.MeshBasicMaterial(&#123; map: texture &#125;);</span><br><span class="line">  this.sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);</span><br><span class="line">  this.scene.add(this.sphere);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcb9b952fe3449d29b8f552b744eaf55~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-10-11-37.gif"></p><p>åŒæ ·ï¼ŒæŠŠè§†è§‰æ”¾çƒå†…ï¼Œè´´å›¾åè½¬ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sphereGeometry.scale(16, 16, -16);</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8178cb958117495f858b5ef385968ed3~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-10-20-58.gif"></p><h2 id="æ·»åŠ æ ‡ç­¾"><a href="#æ·»åŠ æ ‡ç­¾" class="headerlink" title="æ·»åŠ æ ‡ç­¾"></a>æ·»åŠ æ ‡ç­¾</h2><p>æˆ‘ä»¬ç°åœ¨å·²ç»å®ç°å…¨æ™¯çœ‹æˆ¿äº†ï¼Œæ¥ä¸‹æ¥ç»™ä¸€äº›ç‰©ä½“æ·»åŠ è¯´æ˜æ ‡ç­¾ï¼Œæˆ‘è¿™è¾¹çš„æ ‡ç­¾åˆ†ä¸¤ç§ï¼Œä¸€ç§ç‚¹å‡»èƒ½å¤Ÿè¿›å…¥ä¸‹ä¸€ä¸ªæˆ¿é—´ï¼Œä¸€ç§æ˜¯å¼¹å‡ºä¿¡æ¯æ¡†ã€‚å…ˆçœ‹æ•ˆæœï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b48465811db345dd9aa12bb3ff7a239d~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-10-32-16.gif"></p><p>ä¸‹é¢çœ‹çœ‹æˆ‘çš„æ•°æ®ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">dataList: [</span><br><span class="line">    &#123;</span><br><span class="line">        image: require(&quot;@/assets/image/livingRoom.jpg&quot;), // åœºæ™¯è´´å›¾</span><br><span class="line">        tipsList: [ // æ ‡ç­¾æ•°æ®</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: -200, y: -4, z: -147 &#125;, // æ ‡ç­¾ä½ç½®</span><br><span class="line">                content: &#123; // æ ‡ç­¾å†…å®¹</span><br><span class="line">                    title: &quot;è¿›å…¥å¨æˆ¿&quot;, // æ ‡é¢˜</span><br><span class="line">                    text: &quot;&quot;, // æ–‡æœ¬å†…å®¹</span><br><span class="line">                    image: 1, // åœºæ™¯è´´å›¾çš„ä¸‹æ ‡ï¼Œå¯¹åº”dataListä¸‹æ ‡</span><br><span class="line">                    showTip: false, // æ˜¯å¦å±•ç¤ºå¼¹å‡ºæ¡†</span><br><span class="line">                    showTitle: true, // æ˜¯å¦å±•ç¤ºæç¤ºæ ‡é¢˜</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: -100, y: 0, z: -231 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;ä¿¡æ¯ç‚¹2&quot;,</span><br><span class="line">                    text: &quot;77989&quot;,</span><br><span class="line">                    showTip: true,</span><br><span class="line">                    showTitle: false,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: 150, y: -50, z: -198 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;ä¿¡æ¯ç‚¹3&quot;,</span><br><span class="line">                    text: &quot;qwdcz&quot;,</span><br><span class="line">                    showTip: true,</span><br><span class="line">                    showTitle: false,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: 210, y: 11, z: -140 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;ä¿¡æ¯ç‚¹4&quot;,</span><br><span class="line">                    text: &quot;å¤§è±†é£Ÿå¿ƒè™«ä¾¦å¯Ÿåå¤§å¤§è‹æ‰“å¤§å¤§å¤§å¤§å¤§å¤§å¤§&quot;,</span><br><span class="line">                    showTip: true,</span><br><span class="line">                    showTitle: false,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: 208, y: -12, z: 140 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;ä¿¡æ¯ç‚¹5&quot;,</span><br><span class="line">                    text: &quot;eq&quot;,</span><br><span class="line">                    showTip: true,</span><br><span class="line">                    showTitle: false,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: 86, y: -9, z: 236 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;è¿›å…¥æˆ¿é—´&quot;,</span><br><span class="line">                    text: &quot;&quot;,</span><br><span class="line">                    showTip: false,</span><br><span class="line">                    showTitle: true,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        image: require(&quot;@/assets/image/kitchen.jpg&quot;),</span><br><span class="line">        tipsList: [</span><br><span class="line">            &#123;</span><br><span class="line">                position: &#123; x: -199, y: -24, z: 145 &#125;,</span><br><span class="line">                content: &#123;</span><br><span class="line">                    title: &quot;è¿›å…¥å¤§å…&quot;,</span><br><span class="line">                    text: &quot;&quot;,</span><br><span class="line">                    image: 0,</span><br><span class="line">                    showTip: false,</span><br><span class="line">                    showTitle: true,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>å¾€åœºæ™¯ä¸­æ·»åŠ æ ‡ç­¾ï¼Œå¾—åˆ°å¦‚ä¸‹æ•ˆæœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">addTipsSprite(index = 0) &#123;</span><br><span class="line">  let tipTexture = new THREE.TextureLoader().load(</span><br><span class="line">    require(&quot;@/assets/image/tip.png&quot;)</span><br><span class="line">  );</span><br><span class="line">  let material = new THREE.SpriteMaterial(&#123; map: tipTexture &#125;);</span><br><span class="line">  this.tipsSpriteList = [];</span><br><span class="line">  this.dataList[index].tipsList.forEach((item) =&gt; &#123;</span><br><span class="line">    let sprite = new THREE.Sprite(material);</span><br><span class="line">    sprite.scale.set(10, 10, 10);</span><br><span class="line">    sprite.position.set(item.position.x, item.position.y, item.position.z); // è®¾ç½®æ ‡ç­¾ä½ç½®</span><br><span class="line">    sprite.content = item.content; // è®¾ç½®æ ‡ç­¾å†…å®¹</span><br><span class="line">    this.tipsSpriteList.push(sprite); // å‚¨å­˜æ ‡ç­¾</span><br><span class="line">    this.scene.add(sprite); // æ·»åŠ åˆ°åœºæ™¯ä¸­</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/346e25b0db2946239a2df5973497e21a~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-10-52-05.gif"></p><p>æ¥ä¸‹æ¥å®ç°é¼ æ ‡ç§»å…¥ï¼Œå†…å®¹å¼¹å‡ºæ•ˆæœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div class=&quot;tooltip-box&quot; :style=&quot;tooltipPosition&quot; ref=&quot;tooltipBox&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;æ ‡é¢˜ï¼š&#123;&#123; tooltopContent.title &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;explain&quot;&gt;è¯´æ˜ï¼š&#123;&#123; tooltopContent.text &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;p class=&quot;title-text&quot; ref=&quot;titleBox&quot; :style=&quot;titlePosition&quot;&gt;</span><br><span class="line">  &#123;&#123; tooltopContent.title &#125;&#125;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// data</span><br><span class="line">tooltipPosition: &#123; // åˆå§‹åŒ–ä½ç½®å…¨éƒ¨åœ¨å±å¹•ä¹‹å¤–</span><br><span class="line">    top: &quot;-100%&quot;,</span><br><span class="line">    left: &quot;-100%&quot;,</span><br><span class="line">&#125;,</span><br><span class="line">titlePosition: &#123;</span><br><span class="line">    top: &quot;-100%&quot;,</span><br><span class="line">    left: &quot;-100%&quot;,</span><br><span class="line">&#125;,</span><br><span class="line">tooltopContent: &#123;&#125;, // å±•ç¤ºçš„å†…å®¹</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">// method</span><br><span class="line">onMousemove(e) &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  let element = this.$refs.threeDBox;</span><br><span class="line">  let raycaster = new THREE.Raycaster();</span><br><span class="line">  let mouse = new THREE.Vector2();</span><br><span class="line">  // é€šè¿‡é¼ æ ‡ç‚¹å‡»çš„ä½ç½®è®¡ç®—å‡ºraycasteræ‰€éœ€è¦çš„ç‚¹çš„ä½ç½®ï¼Œä»¥å±å¹•ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œå€¼çš„èŒƒå›´ä¸º-1åˆ°1.</span><br><span class="line">  mouse.x = (e.clientX / element.clientWidth) * 2 - 1;</span><br><span class="line">  mouse.y = -(e.clientY / element.clientHeight) * 2 + 1;</span><br><span class="line">  raycaster.setFromCamera(mouse, this.camera);</span><br><span class="line">  // å°†æ ‡ç­¾ç²¾çµæ•°æ®æ”¾è¿›æ¥åšè§†çº¿äº¤äº’</span><br><span class="line">  let intersects = raycaster.intersectObjects(this.tipsSpriteList, true); </span><br><span class="line">  // è§†çº¿ç©¿è¿‡é›†åˆé€‰æ‹©æœ€å‰é¢çš„ä¸€ä¸ª</span><br><span class="line">  if (intersects.length &gt; 0) &#123;</span><br><span class="line">    // å°†æ ‡ç­¾çš„ç©ºé—´åæ ‡è½¬å±å¹•åæ ‡ï¼Œé€šè¿‡è®¡ç®—èµ‹ç»™å…ƒç´ çš„topã€left</span><br><span class="line">    let elementWidth = element.clientWidth / 2;</span><br><span class="line">    let elementHeight = element.clientHeight / 2;</span><br><span class="line">    let worldVector = new THREE.Vector3(</span><br><span class="line">      intersects[0].object.position.x,</span><br><span class="line">      intersects[0].object.position.y,</span><br><span class="line">      intersects[0].object.position.z</span><br><span class="line">    );</span><br><span class="line">    let position = worldVector.project(this.camera);</span><br><span class="line">    this.tooltopContent = intersects[0].object.content;</span><br><span class="line">    if (intersects[0].object.content.showTip) &#123;</span><br><span class="line">      let left = Math.round(</span><br><span class="line">        elementWidth * position.x +</span><br><span class="line">          elementWidth -</span><br><span class="line">          this.$refs.tooltipBox.clientWidth / 2</span><br><span class="line">      );</span><br><span class="line">      let top = Math.round(</span><br><span class="line">        -elementHeight * position.y +</span><br><span class="line">          elementHeight -</span><br><span class="line">          this.$refs.tooltipBox.clientHeight / 2</span><br><span class="line">      );</span><br><span class="line">      this.tooltipPosition = &#123;</span><br><span class="line">        left: `$&#123;left&#125;px`,</span><br><span class="line">        top: `$&#123;top&#125;px`,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; else if (intersects[0].object.content.showTitle) &#123;</span><br><span class="line">      let left = Math.round(</span><br><span class="line">        elementWidth * position.x +</span><br><span class="line">          elementWidth -</span><br><span class="line">          this.$refs.titleBox.clientWidth / 2</span><br><span class="line">      );</span><br><span class="line">      let top = Math.round(-elementHeight * position.y + elementHeight);</span><br><span class="line">      this.titlePosition = &#123;</span><br><span class="line">        left: `$&#123;left&#125;px`,</span><br><span class="line">        top: `$&#123;top&#125;px`,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // é¼ æ ‡ç§»å‡ºå»éšè—æ‰€æœ‰</span><br><span class="line">    this.handleTooltipHide(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">handleTooltipHide(e) &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  this.tooltipPosition = &#123;</span><br><span class="line">    top: &quot;-100%&quot;,</span><br><span class="line">    left: &quot;-100%&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">  this.titlePosition = &#123;</span><br><span class="line">    top: &quot;-100%&quot;,</span><br><span class="line">    left: &quot;-100%&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">  this.tooltopContent = &#123;&#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// mounted</span><br><span class="line">this.renderer.domElement.addEventListener(</span><br><span class="line">  &quot;mousemove&quot;,</span><br><span class="line">  this.onMousemove,</span><br><span class="line">  false</span><br><span class="line">);</span><br><span class="line">this.$refs.tooltipBox.addEventListener(</span><br><span class="line">  &quot;mouseleave&quot;,</span><br><span class="line">  this.handleTooltipHide,</span><br><span class="line">  false</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå¾—åˆ°æ•ˆæœï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa07d85bcd9f4053992e977e01f3cad1~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-11-08-13.gif"></p><h2 id="åœºæ™¯åˆ‡æ¢"><a href="#åœºæ™¯åˆ‡æ¢" class="headerlink" title="åœºæ™¯åˆ‡æ¢"></a>åœºæ™¯åˆ‡æ¢</h2><p>å…¨æ™¯çœ‹æˆ¿æ€»ä¸èƒ½ä¸€ç›´çœ‹ä¸€ä¸ªæˆ¿é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®ç°ç‚¹å‡»åˆ‡æ¢åœºæ™¯åŠŸèƒ½ã€‚ç›´æ¥codeingâ€¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">changeContentAndtips(index) &#123;</span><br><span class="line">  // æ¸…é™¤åœºæ™¯æ•°æ®å†…æ‰€æœ‰çš„ç²¾çµæ ‡ç­¾</span><br><span class="line">  this.scene.children = this.scene.children.filter(</span><br><span class="line">    (item) =&gt; String(item.type) !== &quot;Sprite&quot;</span><br><span class="line">  );</span><br><span class="line">  // å‚¨å­˜æ•°ç»„ç½®ç©º</span><br><span class="line">  this.tipsSpriteList = [];</span><br><span class="line">  // é‡æ–°åŠ è½½è´´å›¾ï¼Œè¿™è¾¹åº”ç”¨gaspåšä¸€ä¸ªç®€å•çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œå°†é€æ˜åº¦ä»0 ~ 1</span><br><span class="line">  let texture = new THREE.TextureLoader().load(this.dataList[index].image);</span><br><span class="line">  let sphereMaterial = new THREE.MeshBasicMaterial(&#123;</span><br><span class="line">    map: texture,</span><br><span class="line">    transparent: true,</span><br><span class="line">    opacity: 0,</span><br><span class="line">  &#125;);</span><br><span class="line">  this.sphere.material = sphereMaterial;</span><br><span class="line">  gsap.to(sphereMaterial, &#123; transparent: true, opacity: 1, duration: 2 &#125;);</span><br><span class="line">  // æ‰‹åŠ¨æ›´æ–°æŠ•å½±çŸ©é˜µ</span><br><span class="line">  this.camera.updateProjectionMatrix();</span><br><span class="line">  // æ·»åŠ å½“å‰åœºæ™¯æ ‡ç­¾</span><br><span class="line">  this.addTipsSprite(index);</span><br><span class="line">&#125;,</span><br><span class="line">onMouseClick(e) &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  let element = this.$refs.threeDBox;</span><br><span class="line">  let raycaster = new THREE.Raycaster();</span><br><span class="line">  let mouse = new THREE.Vector2();</span><br><span class="line">  mouse.x = (e.clientX / element.clientWidth) * 2 - 1;</span><br><span class="line">  mouse.y = -(e.clientY / element.clientHeight) * 2 + 1;</span><br><span class="line">  raycaster.setFromCamera(mouse, this.camera);</span><br><span class="line">  let intersects = raycaster.intersectObjects(this.tipsSpriteList, true);</span><br><span class="line">  if (intersects.length &gt; 0 &amp;&amp; intersects[0].object.content.showTitle) &#123;</span><br><span class="line">    this.changeContentAndtips(intersects[0].object.content.image);</span><br><span class="line">    this.handleTooltipHide(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå¾—åˆ°å®Œæ•´æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af5ec22cb36043b0973bc095df78c8d7~tplv-k3u1fbpfcp-watermark.image" alt="è½»æ˜ å½•å±-2021-12-31-11-18-19.gif"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨è¿™ä¸ªdemoä¸­æœ‰ä¸€äº›ç»†èŠ‚é—®é¢˜æˆ‘å¤„ç†çš„ä¸æ˜¯å¾ˆå¥½ï¼Œä¾‹å¦‚åŠ è½½æ—¶å› ä¸ºè´´å›¾åŠ è½½æ…¢é»‘å±(è¿™æ˜¯å› ä¸ºè´´å›¾å¤ªå¤§ï¼Œä¼˜åŒ–æ—¶å¯åŠ å…¥ç­‰å¾…åŠ¨ç”»)ï¼Œè¿˜æœ‰å°±æ˜¯åŠ è½½é¡ºåºæ²¡å¤„ç†å¥½ï¼Œåœºæ™¯è´´å›¾è¿˜æ²¡åŠ è½½å®Œæ ‡ç­¾å·²ç»è¿›æ¥äº†ã€‚</p><p>åœ¨ä¸æ–­å­¦ä¹  <strong>threejs</strong> çš„è¿‡ç¨‹ä¸­ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºæœ‰è¶£ï¼Œçœ‹ç€åˆ«äººç‚«é…·çš„3Dæ•ˆæœå’Œæ™ºæ…§åŸå¸‚æ„Ÿè§‰å¥½å¼ºï¼Œä¹Ÿæ„Ÿåˆ°è‡ªå·±çš„ä¸è¶³ã€‚è¶ç€è¿™æ®µæ—¶é—´å…¬å¸æœ‰é¡¹ç›®éœ€è¦ç”¨ <strong>threejs</strong> èƒ½å¤Ÿå…‰æ˜æ­£å¤§æ‘¸é±¼å­¦ä¹ ï¼ŒåŠªåŠ›å†²å•ŠğŸ’ª</p><p>æœ€åå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°å„ä½â¤ä»Šå¤©æ˜¯2021æœ€åä¸€å¤©ï¼Œç¥å„ä½å¤§ä½¬ä»Šå¤©æ‘¸é±¼ï¼Œæ˜å¹´å¹´å¹´æœ‰ä½™ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> threejs </category>
          
          <category> å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> threejs </tag>
            
            <tag> å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScriptä¸­objectã€Object å’Œ {} ä¹‹é—´çš„åŒºåˆ«</title>
      <link href="/posts/5ff4fc18/"/>
      <url>/posts/5ff4fc18/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬å­¦ä¹ TypeScriptçš„è¿‡ç¨‹ä¸­å‘ç°ï¼ŒTypeScriptå®šä¹‰äº†ä¸€äº›åå­—ç›¸ä¼¼ä½†æ˜¯æ¦‚å¿µä¸åŒçš„ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·è®¨è®ºä¸‹objectã€Object å’Œ {} ä¹‹é—´çš„åŒºåˆ«ã€‚</p><h2 id="object"><a href="#object" class="headerlink" title="object"></a>object</h2><p><code>object</code>Â ç±»å‹ä»–è¡¨ç¤ºéåŸå§‹å¯¹è±¡ï¼Œ<code>number</code>ï¼Œ<code>string</code>ï¼Œ<code>boolean</code>ï¼Œ<code>symbol</code>ï¼Œ<code>null</code>æˆ–<code>undefined</code>åœ¨JavaScriptä¸­ä¸ºåŸå§‹ç±»å‹</p><p>ä½¿ç”¨<code>object</code>ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ<code>Object.create</code>è¿™æ ·çš„APIï¼Œåœ¨TypeScript2.2çš„å‘å¸ƒï¼Œæ ‡å‡†åº“çš„ç±»å‹å£°æ˜å·²ç»æ›´æ–°ï¼Œä»¥ä½¿ç”¨æ–°çš„å¯¹è±¡ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ<code>Object.create()</code>Â å’Œ<code>Object.setPrototypeOf()</code>Â æ–¹æ³•ï¼Œç°åœ¨éœ€è¦ä¸ºå®ƒä»¬çš„åŸå‹å‚æ•°æŒ‡å®šÂ <code>object | null</code>Â ç±»å‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">declare function create(o: object | null): void;</span><br><span class="line"></span><br><span class="line">create(&#123; prop: 0 &#125;); // OK</span><br><span class="line">create(null); // OK</span><br><span class="line">create(42); // Error</span><br><span class="line">create(&quot;string&quot;); // Error</span><br><span class="line">create(false); // Error</span><br><span class="line">create(undefined); // Error</span><br></pre></td></tr></table></figure><h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>TypeScriptä¸­è¿˜æœ‰ä¸€ä¸ªè·Ÿ<code>object</code>Â ç±»å‹å‡ ä¹åŒåçš„ç±»å‹ï¼Œä»–å°±æ˜¯Objectã€‚è¯¥ç±»å‹æ˜¯æ‰€æœ‰ Object ç±»çš„å®ä¾‹çš„ç±»å‹</p><p>ç”¨ä¸€å¥è¯æ¥è¯´<code>Object</code>å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯æ˜¯åŒ…å«äº†jsåŸå§‹çš„æ‰€æœ‰å…¬ç”¨çš„åŠŸèƒ½ã€‚æŸ¥çœ‹tsæºç å¯ä»¥äº†è§£è¯¦æƒ…Object</p><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥å£æ¥å®šä¹‰å¯¹è±¡çš„ç±»å‹ï¼Œé‚£ä¹ˆæ¥å£æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ</p><p>åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œæ¥å£æ˜¯ä¸€ç§è§„èŒƒçš„å®šä¹‰ï¼Œå®ƒå®šä¹‰äº†è¡Œä¸ºå’ŒåŠ¨ä½œçš„è§„èŒƒï¼Œåœ¨ç¨‹åºè®¾è®¡é‡Œé¢ï¼Œæ¥å£èµ·åˆ°ä¸€ç§é™åˆ¶å’Œè§„èŒƒçš„ä½œç”¨ã€‚æ¥å£å®šä¹‰äº†æŸä¸€æ‰¹ç±»æ‰€éœ€è¦éµå®ˆçš„è§„èŒƒï¼Œæ¥å£ä¸å…³å¿ƒè¿™äº›ç±»çš„å†…éƒ¨çŠ¶æ€æ•°æ®ï¼Œä¹Ÿä¸å…³å¿ƒè¿™äº›ç±»é‡Œæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œå®ƒåªè§„å®šè¿™æ‰¹ç±»é‡Œå¿…é¡»æä¾›æŸäº›æ–¹æ³•ï¼Œæä¾›è¿™äº›æ–¹æ³•çš„ç±»å°±å¯ä»¥æ»¡è¶³å®é™…éœ€è¦ã€‚ typescripä¸­çš„æ¥å£ç±»ä¼¼äºjavaï¼ŒåŒæ—¶è¿˜å¢åŠ äº†æ›´çµæ´»çš„æ¥å£ç±»å‹ï¼ŒåŒ…æ‹¬å±æ€§ã€å‡½æ•°ã€å¯ç´¢å¼•å’Œç±»ç­‰</p><ul><li><code>Object</code> æ¥å£å®šä¹‰äº† Object.prototype åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// Objectæ¥å£å®šä¹‰                                 </span><br><span class="line">interface Person &#123;                              </span><br><span class="line">Â  Â  name: string;                                     </span><br><span class="line">Â  Â  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">Â  Â  name: &#x27;Tom&#x27;,</span><br><span class="line">Â  Â  age: 25</span><br><span class="line">&#125;;  // success</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">Â  Â  name: 11,</span><br><span class="line">Â  Â  age: 25</span><br><span class="line">&#125;;  // Error</span><br></pre></td></tr></table></figure>Object ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½ç»§æ‰¿äº† Object æ¥å£ä¸­çš„æ‰€æœ‰å±æ€§</li></ul><p>è®°ä½ï¼Objectä¸æ˜¯objectï¼Œä¸è¦æŠŠä»–ä»¬ä¸¤æ··æ·†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let a: object</span><br><span class="line">let b: Object</span><br><span class="line"></span><br><span class="line">a = &#x27;1&#x27; // Error Type &#x27;&quot;1&quot;&#x27; is not assignable to type &#x27;object&#x27;</span><br><span class="line"></span><br><span class="line">a = &#123;&#125; // Success</span><br><span class="line"></span><br><span class="line">b = &#x27;1&#x27; // Success</span><br><span class="line"></span><br><span class="line">b = &#123;&#125; // Success</span><br></pre></td></tr></table></figure><h2 id="ç©ºç±»å‹"><a href="#ç©ºç±»å‹" class="headerlink" title="ç©ºç±»å‹ {}"></a>ç©ºç±»å‹ {}</h2><p>ç©ºå¯¹è±¡ï¼šå®ƒæè¿°äº†ä¸€ä¸ªæ²¡æœ‰æˆå‘˜çš„å¯¹è±¡ã€‚å½“ä½ è¯•å›¾è®¿é—®è¿™æ ·ä¸€ä¸ªå¯¹è±¡çš„ä»»æ„å±æ€§æ—¶ï¼ŒTypeScript ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚ä½†æ˜¯ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨åœ¨ Object ç±»å‹ä¸Šå®šä¹‰çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•å¯é€šè¿‡ JavaScript çš„åŸå‹é“¾éšå¼åœ°ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let a = &#123;&#125;</span><br><span class="line"></span><br><span class="line">a.prop = &#x27;123&#x27; // Error Property &#x27;prop&#x27; does not exist on type &#x27;&#123;&#125;&#x27;</span><br><span class="line"></span><br><span class="line">a.toString() // &quot;[object Object]&quot;</span><br></pre></td></tr></table></figure><p>åœ¨JavaSCriptä¸­ç»™å¯¹è±¡èµ‹äºˆå±æ€§å¾ˆç®€å•ï¼Œä½†æ˜¯åœ¨TypeScriptä¸­ï¼Œè¿™æ ·å†™ä¼šæŠ¥é”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// JavaScript</span><br><span class="line">const a = &#123;&#125;; </span><br><span class="line">a.x = 3; </span><br><span class="line">a.y = 4;</span><br><span class="line"></span><br><span class="line">// TypeScript</span><br><span class="line">const a = &#123;&#125;; </span><br><span class="line">a.x = 3; // Error Property &#x27;x&#x27; does not exist on type &#x27;&#123;&#125;&#x27;</span><br><span class="line">a.y = 4; // Error Property &#x27;y&#x27; does not exist on type &#x27;&#123;&#125;&#x27;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºä¸Šé¢açš„ç±»å‹æ˜¯æ ¹æ® {}æ¨æ–­å‡ºæ¥çš„ï¼Œä»–èƒ½å¯¹å·²æœ‰çš„å±æ€§èµ‹å€¼ã€‚å¦‚æœéœ€è¦ä¸€æ­¥æ­¥åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€<code>as</code>æ¥æ¶ˆé™¤TYpeScriptçš„ç±»å‹æ£€æŸ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const a = &#123;&#125; as Point;</span><br><span class="line">a.x = 3</span><br><span class="line">a.y = 4 // Success</span><br></pre></td></tr></table></figure><p>æ›´å¥½çš„æ–¹æ³•æ˜¯å£°æ˜å˜é‡çš„ç±»å‹å¹¶ä¸€æ¬¡æ€§æ„å»ºå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const a: Point = &#123;</span><br><span class="line">    x: 3,</span><br><span class="line">    y: 4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆTypeScriptæ¯”JavaScriptæœ‰ä¼˜åŠ¿ï¼ŸTypeScriptå’ŒJavaScriptåŒºåˆ«åœ¨å“ªï¼Ÿ</title>
      <link href="/posts/1d6d0531/"/>
      <url>/posts/1d6d0531/</url>
      
        <content type="html"><![CDATA[<p>TypeScriptå’ŒJavaScriptæ˜¯ç›®å‰é¡¹ç›®å¼€å‘ä¸­æ¯”è¾ƒæµè¡Œçš„ä¸¤ç§è„šæœ¬è¯­è¨€ï¼Œä½†JavaScriptèƒ½å¦åˆ›å»ºå¤§å‹å¤æ‚çš„webåº”ç”¨ï¼Œè¿™ææ€•æ²¡é‚£ä¹ˆå®¹æ˜“</p><p>äºæ˜¯æˆ‘ä»¬é€‰ä¸­å¦å¤–ä¸€ä¸ªè§£å†³æ–¹æ¡ˆâ€”â€”TypeScript</p><p>åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼ŒTypeScriptå—æ¬¢è¿ç¨‹åº¦å’Œä½¿ç”¨ç‡ä¸€ç›´å¢é•¿ã€‚ç›®å‰æœ€å¤§çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€Angularå°±æ˜¯ä½¿ç”¨TypeScriptã€‚å¹¶ä¸”2020å¹´ä¹‹åï¼ŒReactã€Vue3.0ä¹Ÿé€æ­¥åƒTypeScripté æ‹¢ã€‚æ ¹æ®æ•°æ®æ˜¾ç¤ºï¼Œå¤§çº¦60%çš„å‰ç«¯ç¨‹åºå‘˜æ­£åœ¨ä½¿ç”¨æˆ–è€…ä½¿ç”¨è¿‡TypeScriptï¼Œçº¦22%å¸Œæœ›ä½¿ç”¨å¹¶ä¸”ä¿ç•™å­¦ä¹ æ„å‘</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cf8f81a218048ed9a95763bf9dd549b~tplv-k3u1fbpfcp-watermark.image" alt="1e3a93be708f9dec600f2e1f72e396a.png"></p><h2 id="ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ"></a>ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ</h2><p>TypeScriptç®€ç§°TSï¼ŒJavaScriptçš„è¶…é›†ï¼Œå°±æ˜¯åœ¨JavaScriptçš„åŸºç¡€ä¸Šåšä¸€å±‚å°è£…ï¼Œå°è£…å‡ºTSçš„ç‰¹æ€§ï¼Œæœ€ç»ˆå¯ä»¥ç¼–è¯‘ä¸ºJavaScript</p><p>TSæœ€åˆæ˜¯ä¸ºäº†è®©ä¹ æƒ¯ç¼–å†™å¼ºç±»å‹è¯­è¨€çš„åç«¯ç¨‹åºå‘˜èƒ½å¿«é€Ÿç¼–å†™webåº”ç”¨ï¼Œå› ä¸º JavaScript æ²¡æœ‰å¼ºæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ TypeScript æä¾›äº†é™æ€æ•°æ®ç±»å‹ï¼Œè¿™æ˜¯ TypeScript çš„æ ¸å¿ƒ</p><p>éšç€é¡¹ç›®ä¸æ–­å£®å¤§ï¼Œè¶Šæ¥è¶Šå¤šçš„æƒ…æ–­æ„è¯†åˆ°é™æ€æ•°æ®ç±»å‹çš„é‡è¦æ€§ã€‚éšç€ TypeScript è¶Šæ¥è¶Šå®Œå–„ï¼Œæ‹¥è¶¸è¶Šæ¥è¶Šå¤šï¼Œéœ€æ±‚è¶Šæ¥è¶Šå¤§ã€‚æœ€åç”±å‰ç«¯3å¤§æ¡†æ¶ä¹‹ä¸€Angular2.xå¸¦å¤´ä½¿ç”¨ã€‚</p><h2 id="TypeScriptçš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ"><a href="#TypeScriptçš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ" class="headerlink" title="TypeScriptçš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ"></a>TypeScriptçš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ</h2><h3 id="é™æ€ç±»å‹"><a href="#é™æ€ç±»å‹" class="headerlink" title="é™æ€ç±»å‹"></a>é™æ€ç±»å‹</h3><p>é™æ€ç±»å‹åŒ–æ˜¯ä¸€ç§åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å¼€å‘äººå‘˜ç¼–å†™è„šæœ¬æ˜¯æ£€æµ‹é”™è¯¯ï¼Œæœ‰äº†è¿™é¡¹åŠŸèƒ½ï¼Œå°±ä¼šå…è®¸å¼€å‘äººå‘˜ç¼–å†™æ›´å¥å£®çš„ä»£ç å¹¶å¯¹å…¶è¿›è¡Œç»´æŠ¤ï¼Œä»¥ä¾¿ä½¿å¾—ä»£ç è´¨é‡æ›´å¥½ã€æ›´æ¸…æ™°ã€‚</p><p>ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fab75c2335fd47378636dcb22a098072~tplv-k3u1fbpfcp-watermark.image" alt="7dc93a47fcb5ffc7816ee4d77d1a0ff.png"></p><p>ä»ä»£ç å¯çŸ¥å˜é‡numæ˜¯numberç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬ç»™numèµ‹äºˆå…¶ä»–ç±»å‹çš„å€¼å°±ä¼šæŠ¥é”™ã€‚</p><p>åœ¨å‡½æ•°ä¸­çš„è¡¨è¾¾ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c8db42b2d574c30b9c81bd93a48b787~tplv-k3u1fbpfcp-watermark.image" alt="ba5c67896cd0b5c5cdf102f152ebf99.png"></p><p>è¿™æ ·æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°è¡¨è¾¾å‡ºæ¥ï¼Œå‡½æ•°funæ¥å—ä¸¤ä¸ªç±»å‹çš„numberçš„å‚æ•°ï¼Œä¼ å…¥énumberçš„å‚æ•°æŠ¥é”™ã€‚</p><p>é™¤æ­¤ä¹‹å¤–TypeScriptè¿˜æœ‰å¤šç§æ•°æ®ç±»å‹ï¼Œè¯¦ç»†å¤§å®¶å¯ä»¥åœ¨æ–‡æ¡£ä¸­æŸ¥çœ‹ <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">TypeScriptæ–‡æ¡£</a></p><h3 id="å¤§å‹é¡¹ç›®çš„ä¼˜åŠ¿"><a href="#å¤§å‹é¡¹ç›®çš„ä¼˜åŠ¿" class="headerlink" title="å¤§å‹é¡¹ç›®çš„ä¼˜åŠ¿"></a>å¤§å‹é¡¹ç›®çš„ä¼˜åŠ¿</h3><p>å¯¹äºå¤§å‹é¡¹ç›®çš„å¼€å‘ï¼Œæœ‰æ—¶ä¸ºäº†ä¼˜åŒ–æ”¹è¿›é¡¹ç›®ï¼Œå¯¹ä»£ç è¿›è¡Œå°å°æ›´æ”¹ã€‚è¿™äº›å°å°çš„å˜åŒ–å¯èƒ½ä¼šäº§ç”Ÿä¸¥é‡çš„ã€æ„æƒ³ä¸åˆ°çš„åæœï¼Œå› æ­¤æœ‰å¿…è¦æ’¤é”€è¿™äº›å˜åŒ–ã€‚ä½¿ç”¨TypeScriptå·¥å…·æ¥è¿›è¡Œé‡æ„æ›´å˜çš„å®¹æ˜“ã€å¿«æ·ã€‚</p><h3 id="æ›´å¥½çš„åä½œ"><a href="#æ›´å¥½çš„åä½œ" class="headerlink" title="æ›´å¥½çš„åä½œ"></a>æ›´å¥½çš„åä½œ</h3><p>å¯¹äºå¤§å‹é¡¹ç›®çš„å¼€å‘ä¸€èˆ¬ä¼šæœ‰å¾ˆå¤šå¼€å‘äººå‘˜ä¸€èµ·å¼€å‘ï¼Œæ­¤æ—¶ä¹±ç å’Œé”™è¯¯çš„æœºä¹Ÿä¼šå¢åŠ ã€‚ç±»å‹å®‰å…¨æ˜¯ä¸€ç§åœ¨ç¼–ç æœŸé—´æ£€æµ‹é”™è¯¯çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘é¡¹ç›®æ—¶æ£€æµ‹é”™è¯¯ã€‚è¿™ä¸ºå¼€å‘å›¢é˜Ÿåˆ›å»ºäº†ä¸€ä¸ªæ›´é«˜æ•ˆçš„ç¼–ç å’Œè°ƒè¯•è¿‡ç¨‹ã€‚</p><h2 id="TypeScriptå’ŒJavaScriptåŒºåˆ«åœ¨å“ªï¼Ÿ"><a href="#TypeScriptå’ŒJavaScriptåŒºåˆ«åœ¨å“ªï¼Ÿ" class="headerlink" title="TypeScriptå’ŒJavaScriptåŒºåˆ«åœ¨å“ªï¼Ÿ"></a>TypeScriptå’ŒJavaScriptåŒºåˆ«åœ¨å“ªï¼Ÿ</h2><ul><li>TypeScriptèƒ½ä½¿ç”¨JavaScript ä¸­çš„æ‰€æœ‰ä»£ç å’Œç¼–ç æ¦‚å¿µ</li><li>TypeScript ä»æ ¸å¿ƒè¯­è¨€æ–¹é¢å’Œç±»æ¦‚å¿µçš„æ¨¡å¡‘æ–¹é¢å¯¹ JavaScript å¯¹è±¡æ¨¡å‹è¿›è¡Œæ‰©å±•</li><li>JavaScript ä»£ç å¯ä»¥åœ¨æ— éœ€ä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä¸ TypeScript ä¸€åŒå·¥ä½œï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨ç¼–è¯‘å™¨å°† TypeScript ä»£ç è½¬æ¢ä¸º JavaScript</li><li>TypeScript é€šè¿‡ç±»å‹æ³¨è§£æä¾›ç¼–è¯‘æ—¶çš„é™æ€ç±»å‹æ£€æŸ¥</li><li>TypeScript ä¸­çš„æ•°æ®è¦æ±‚å¸¦æœ‰æ˜ç¡®çš„ç±»å‹ï¼ŒJavaScriptä¸è¦æ±‚</li><li>TypeScript ä¸ºå‡½æ•°æä¾›äº†ç¼ºçœå‚æ•°å€¼</li><li>TypeScript å¼•å…¥äº† JavaScript ä¸­æ²¡æœ‰çš„â€œç±»â€æ¦‚å¿µ</li><li>TypeScript ä¸­å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µï¼Œå¯ä»¥æŠŠå£°æ˜ã€æ•°æ®ã€å‡½æ•°å’Œç±»å°è£…åœ¨æ¨¡å—ä¸­</li></ul><p>è‡³äºä»€ä¹ˆè¯¥ä½¿ç”¨TSæˆ–JSï¼Œæˆ‘è®¤ä¸ºåœ¨æ„å»ºå¤æ‚å¤§å‹webåº”ç”¨æ—¶TSæ˜¯é¦–é€‰ï¼Œé¡¹ç›®ä¸å¤æ‚æ—¶åªéœ€çµæ´»è¿ç”¨JSå°±å·²ç»è¶³å¤Ÿäº†ã€‚</p><p>ç¬¬ä¸€æ¬¡å†™æ–‡ç å­—ï¼Œæœ‰äº›è¯­å¥ä¸é€šé¡ºä¹‹å¤„è¯·å„ä½å¤šå¤šæ‹…å¾…ï¼Œè‹¥æœ‰é”™è¯¯è¯·å„ä½å¤§ä½¬åŠæ—¶æŒ‡å‡ºï¼Œå¤šè°¢å„ä½</p><p>æˆ‘ä»¬ä¸‹ç¯‡æ–‡æ¡£è¯´ä¸‹TSå’ŒJSçš„ä½¿ç”¨æœ‰ä½•ä¸åŒâ€¦</p>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>threejså…¨æ™¯è§†é¢‘</title>
      <link href="/posts/511f0140/"/>
      <url>/posts/511f0140/</url>
      
        <content type="html"><![CDATA[<p>å„ä½å¤§ä½¬ä»¬å¤§å®¶å¥½ğŸ˜Šï¼Œå¾ˆä¹…æ²¡æ›´æ–°æ–‡ç« äº†ã€‚å› ä¸ºå‰ç«¯æ—¶é—´æŒºå¿™çš„ï¼Œå„ç§é¡¹ç›®ã€å‡†å¤‡è½¯è€ƒç­‰ç­‰ç»™è€½æäº†ğŸ™ã€‚æœ€è¿‘è¿™æ®µæ—¶é—´æœ‰ç‚¹è¿·ä¸ŠthreeJsï¼Œç»è¿‡æœå¯»å‘ç°ç½‘ç»œä¸Šå…³äºthreeJsçš„èµ„æºè¿˜æ˜¯ç›¸å¯¹è¾ƒå°‘çš„ï¼Œè€Œä¸”æ¯”è¾ƒæ—§ã€‚</p><p>ä»Šå¤©æˆ‘ä½¿ç”¨threeJsæ¥å®ç°ä¸€ä¸ªå…¨æ™¯è§†é¢‘ï¼Œå¸¦é¢†å¤§å®¶è§‚çœ‹æ¢…èµ›å¾·æ–¯çš„ç§‘æŠ€å±•è§ˆğŸ†ï¼Œæ•ˆæœå¤§æ¦‚å¦‚ä¸‹ï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/203ae0bddfc34b639c12e8aaddb8f3f5~tplv-k3u1fbpfcp-watermark.image?" alt="æ•ˆæœå›¾ç‰‡" width="500" align="center" /><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å…ˆäº†è§£threeJsçš„çŸ¥è¯†ï¼Œè¿™é‡Œä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œå°±ä¸åšè¿‡å¤šçš„è¯´æ˜ï¼Œæœ‰å…³threeJså…¥é—¨çš„åªæ˜¯å„ä½å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹é“¾æ¥ï¼š</p><ul><li><a href="https://threejs.org/"> threeJså®˜æ–¹è‹±æ–‡æ–‡æ¡£ https://threejs.org/ </a></li><li><a href="http://www.yanhuangxueyuan.com/"> éƒ­éš†é‚¦æŠ€æœ¯åšå®¢ http://www.yanhuangxueyuan.com/</a></li><li><a href="https://github.com/mrdoob/three.js/"> threeJs githubåœ°å€ https://github.com/mrdoob/three.js/ </a></li></ul><hr><p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹è¿›å…¥æ­£é¢˜</p><h2 id="èµ„æºå‡†å¤‡"><a href="#èµ„æºå‡†å¤‡" class="headerlink" title="èµ„æºå‡†å¤‡"></a>èµ„æºå‡†å¤‡</h2><p>æˆ‘ä»¬è¿›å…¥threeJs githubåœ°å€ä¸‹è½½ <strong>three.min.js</strong> å’Œ <strong>OrbitControls.js</strong>ï¼Œè¿™ä¸¤ä¸ªæˆ‘ä»¬ç­‰ä¸‹ä¼šç”¨åˆ°ï¼Œå…¶æ¬¡éœ€è¦å‡†å¤‡ä¸€ä¸ª <strong>360å…¨æ™¯è§†é¢‘</strong> ï¼Œè¿˜æœ‰ä¸€äº›å°å›¾æ ‡ä¹‹ç±»çš„ã€‚è§†é¢‘ä¸‹è½½åœ°å€æˆ‘å·²ç»å¿˜äº†ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œä¸Šé¢æåˆ°çš„æ‰€æœ‰èµ„æºæˆ‘éƒ½ä¼šæ”¾åœ¨æºç ä¸­æä¾›ç»™å¤§å®¶</p><h2 id="æ­£å¼ç¼–ç "><a href="#æ­£å¼ç¼–ç " class="headerlink" title="æ­£å¼ç¼–ç "></a>æ­£å¼ç¼–ç </h2><h3 id="å‡†å¤‡é›å½¢"><a href="#å‡†å¤‡é›å½¢" class="headerlink" title="å‡†å¤‡é›å½¢"></a>å‡†å¤‡é›å½¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div class=&quot;big-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;screen-container&quot; id=&quot;screenContainer&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;video-container&quot; id=&quot;videoContainer&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// style</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    width: 100vw;</span><br><span class="line">    height: 100vh;</span><br><span class="line">    background-color: #666565;</span><br><span class="line">&#125;</span><br><span class="line">.big-container &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 50%;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%, -50%);</span><br><span class="line">    width: 90vw;</span><br><span class="line">    height: 80vh;</span><br><span class="line">&#125;</span><br><span class="line">.screen-container &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.video-container &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background-color: #000000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–ç å®Œæˆåçœ‹åˆ°å¦‚æ­¤ç•Œé¢</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c9c98619e3044808860a8e774f5e268~tplv-k3u1fbpfcp-watermark.image?" alt="æ•ˆæœå›¾ç‰‡" width="500" align="center" /><h3 id="å‡†å¤‡3dç¯å¢ƒ"><a href="#å‡†å¤‡3dç¯å¢ƒ" class="headerlink" title="å‡†å¤‡3dç¯å¢ƒ"></a>å‡†å¤‡3dç¯å¢ƒ</h3><p>å°†æœ¬æ¬¡demoä¸­æ‰€éœ€çš„ä¸¤ä¸ªæ–‡ä»¶å¼•å…¥è¿›æ¥ï¼Œç¼–å†™ä¸€äº›åˆå§‹åŒ–å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./js/three.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;./js/OrbitControls.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // åˆå§‹åŒ–ä¸€äº›å‚æ•°</span><br><span class="line">    var scene = null;</span><br><span class="line">    var camera = null;</span><br><span class="line">    var renderer = null;</span><br><span class="line">    var controls = null;</span><br><span class="line">    var video = null;</span><br><span class="line">    var mesh = null;</span><br><span class="line">    var player = null;</span><br><span class="line">    var playVariables = &#123;</span><br><span class="line">        playClick: true,</span><br><span class="line">        isBigScreen: false,</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    // è·å–å®¹å™¨</span><br><span class="line">    var videoContainer = document.getElementById(&quot;videoContainer&quot;);</span><br><span class="line">    </span><br><span class="line">    initScene();</span><br><span class="line">    initCamera(videoContainer);</span><br><span class="line">    initRenderer(videoContainer);</span><br><span class="line">    initControls(videoContainer);</span><br><span class="line">    render();</span><br><span class="line">    </span><br><span class="line">    // åˆå§‹åŒ–åœºæ™¯</span><br><span class="line">    function initScene() &#123;</span><br><span class="line">        scene = new THREE.Scene();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆå§‹åŒ–ç›¸æœº</span><br><span class="line">    function initCamera(element) &#123;</span><br><span class="line">        camera = new THREE.PerspectiveCamera(</span><br><span class="line">            75,</span><br><span class="line">            element.clientWidth / element.clientHeight,</span><br><span class="line">            1,</span><br><span class="line">            1100</span><br><span class="line">        );</span><br><span class="line">        camera.position.set(1, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆå§‹åŒ–æ¸²æŸ“å™¨</span><br><span class="line">    function initRenderer(element) &#123;</span><br><span class="line">        renderer = new THREE.WebGLRenderer();</span><br><span class="line">        renderer.setSize(element.offsetWidth, element.offsetHeight);</span><br><span class="line">        element.appendChild(renderer.domElement);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆå§‹åŒ–æ§åˆ¶å™¨</span><br><span class="line">    function initControls(element) &#123;</span><br><span class="line">        controls = new THREE.OrbitControls(camera, element);</span><br><span class="line">        controls.rotateSpeed = 0.05;</span><br><span class="line">        controls.enableDamping = true;</span><br><span class="line">        controls.dampingFactor = 0.05;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ‰§è¡Œæ¸²æŸ“</span><br><span class="line">    function render() &#123;</span><br><span class="line">        requestAnimationFrame(render);</span><br><span class="line">        controls.update();</span><br><span class="line">        renderer.render(scene, camera);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œä¸Šé¢ä»£ç ï¼Œè¿˜æ˜¯çœ‹ä¸åˆ°æ•ˆæœçš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿è¯ä¸æŠ¥é”™å³å¯</p><h3 id="åˆå§‹åŒ–è§†é¢‘å¹¶å°†è§†é¢‘æ¸²æŸ“åˆ°ç¯å¢ƒä¸­"><a href="#åˆå§‹åŒ–è§†é¢‘å¹¶å°†è§†é¢‘æ¸²æŸ“åˆ°ç¯å¢ƒä¸­" class="headerlink" title="åˆå§‹åŒ–è§†é¢‘å¹¶å°†è§†é¢‘æ¸²æŸ“åˆ°ç¯å¢ƒä¸­"></a>åˆå§‹åŒ–è§†é¢‘å¹¶å°†è§†é¢‘æ¸²æŸ“åˆ°ç¯å¢ƒä¸­</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">initVideo();</span><br><span class="line">initContent();</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºvideoæ ‡ç­¾å¹¶é…ç½®ä¸€äº›å±æ€§ã€è§†é¢‘åœ°å€ç­‰ï¼Œå°†videoèµ‹å€¼ç»™playeræ–¹ä¾¿åé¢æ§åˆ¶ç”¨</span><br><span class="line">function initVideo() &#123;</span><br><span class="line">    video = document.createElement(&quot;video&quot;);</span><br><span class="line">    video.preload = &quot;auto&quot;;</span><br><span class="line">    video.crossOrigin = &quot;anonymous&quot;;</span><br><span class="line">    video.src = &quot;./resources/video.mp4&quot;;</span><br><span class="line">    player = video;</span><br><span class="line">&#125;</span><br><span class="line">// åˆ›å»ºä¸€ä¸ªçƒå‹å‡ ä½•ä½“å¹¶å°†è§†é¢‘ä½œä¸ºçº¹ç†è´´å›¾è´´åˆ°æè´¨ä¸­ï¼Œæœ€åç”Ÿæˆç½‘æ ¼æ¨¡å‹å¹¶æ·»åŠ åˆ°åœºæ™¯é‡Œ</span><br><span class="line">function initContent() &#123;</span><br><span class="line">    var geometry = new THREE.SphereBufferGeometry(300, 90, 90);</span><br><span class="line">    geometry.scale(-1, 1, 1);</span><br><span class="line">    var texture = new THREE.VideoTexture(video);</span><br><span class="line">    texture.minFilter = THREE.LinearFilter;</span><br><span class="line">    texture.format = THREE.RGBFormat;</span><br><span class="line">    var material = new THREE.MeshBasicMaterial(&#123;</span><br><span class="line">        map: texture,</span><br><span class="line">    &#125;);</span><br><span class="line">    mesh = new THREE.Mesh(geometry, material);</span><br><span class="line">    mesh.position.set(0, 0, 0);</span><br><span class="line">    scene.add(mesh);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤„ç†å®Œåä¾æ—§æ˜¯æ¼†é»‘ä¸€ç‰‡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡videoçš„autoplayå±æ€§è®©è§†é¢‘æ’­æ”¾èµ·æ¥(ä½†æ˜¯æˆ‘æ˜¯ç”¨æ˜¯åªåœ¨æœåŠ¡å™¨çƒ­æ›´æ–°æ—¶æœ‰æ•ˆæœï¼Œå¯èƒ½æˆ‘æ²¡æœ‰ç­‰å¾…è§†é¢‘åŠ è½½å®ŒæˆğŸ¶)</p><h3 id="å‡†å¤‡æ§åˆ¶æŒ‰é’®è®©è§†é¢‘æ’­æ”¾èµ·æ¥"><a href="#å‡†å¤‡æ§åˆ¶æŒ‰é’®è®©è§†é¢‘æ’­æ”¾èµ·æ¥" class="headerlink" title="å‡†å¤‡æ§åˆ¶æŒ‰é’®è®©è§†é¢‘æ’­æ”¾èµ·æ¥"></a>å‡†å¤‡æ§åˆ¶æŒ‰é’®è®©è§†é¢‘æ’­æ”¾èµ·æ¥</h3><p>åœ¨è¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªå…¨å±é®ç½©</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div class=&quot;video-mask&quot;&gt;</span><br><span class="line">    &lt;img</span><br><span class="line">        src=&quot;./resources/play.png&quot;</span><br><span class="line">        onClick=&quot;toggleVideo()&quot;</span><br><span class="line">        alt=&quot;play.png&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// style</span><br><span class="line">.video-mask &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 50%;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%, -50%);</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background-color: rgba(0, 0, 0, 0.8);</span><br><span class="line">&#125;</span><br><span class="line">.video-mask img &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 50%;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translate(-50%, -50%);</span><br><span class="line">    width: 10%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// javascript</span><br><span class="line">// playClickæ˜¯æ’­æ”¾çŠ¶æ€ false - æœªæ’­æ”¾  true - æ­£åœ¨æ’­æ”¾</span><br><span class="line">function toggleVideo() &#123;</span><br><span class="line">    if (playVariables.playClick) &#123;</span><br><span class="line">        document.getElementsByClassName(&quot;video-mask&quot;)[0].style.display = &quot;none&quot;;</span><br><span class="line">        playVariables.playClick = false;</span><br><span class="line">        player.play();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        playVariables.playClick = true;</span><br><span class="line">        player.pause();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹ä¸‹å½“å‰çš„æ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåˆ¶ä½œå‡ºå…¨æ™¯è§†é¢‘äº†</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fee83db7415345439813697cf111aa11~tplv-k3u1fbpfcp-watermark.image" alt="å±å¹•å½•åˆ¶2021-11-22 ä¸‹åˆ9.53.39.gif"></p><h3 id="åŠ å…¥åº•éƒ¨æ§åˆ¶æ "><a href="#åŠ å…¥åº•éƒ¨æ§åˆ¶æ " class="headerlink" title="åŠ å…¥åº•éƒ¨æ§åˆ¶æ "></a>åŠ å…¥åº•éƒ¨æ§åˆ¶æ </h3><p>å…¶å®æˆ‘ä»¬ä¸Šé¢å·²ç»å°†å…¨æ™¯è§†é¢‘åˆ¶ä½œå‡ºæ¥ï¼Œè¯¥æ“ä½œä¹ŸåŒæ ·åº”ç”¨äºå…¨æ™¯ç›´æ’­ã€‚ç»†æƒ³ï¼Œæ¥å…¥è§†é¢‘æµï¼Œè½¬ä¸ºè´´å›¾è´´åˆ°å‡ ä½•æ¨¡å‹ï¼Œå†æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼Œæœ€åæ¸²æŸ“å‡ºæ¥ï¼Œé…ä¸Šæ§åˆ¶å™¨ï¼Œè¿™ä¸æ˜¯ä¸€æ‘¸ä¸€æ ·çš„æ•ˆæœå—ğŸ˜œ</p><p>ç°åœ¨æˆ‘ä»¬ä¸ºäº†è®©ä¸Šé¢è§†é¢‘æ“ä½œæ›´åŠ å®Œå–„ï¼Œæˆ‘ä»¬åŠ å…¥åº•éƒ¨æ§åˆ¶æŒ‰é’®ï¼Œæ’­æ”¾&#x2F;æš‚åœã€è¿›åº¦æ¡ã€å…¨å±ã€çª—å£é‡ç½®å¤§å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line">&lt;div class=&quot;video-bar&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;video-btn&quot; onclick=&quot;toggleVideo()&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;./resources/pause.png&quot; class=&quot;btn-hidden&quot; alt=&quot;pause.png&quot; width=&quot;68%&quot; /&gt;</span><br><span class="line">        &lt;img src=&quot;./resources/play.png&quot; alt=&quot;pause.png&quot; width=&quot;68%&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;progress-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;time-box&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;current-video-time&quot;&gt;00:00&lt;/span&gt;/&lt;span class=&quot;total-video-time&quot;&gt;00:00&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;progress-wrapper&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;progress&quot; id=&quot;progress-play&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;full-screen&quot; onclick=&quot;toggleBigScreen()&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;./resources/bigscreen.png&quot; alt=&quot;bigscreen.png&quot; width=&quot;68%&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// è¿™æ®µstyleå¤ªé•¿äº† æˆ‘å°±ä¸è´´ä¸Šæ¥äº†ï¼Œè¯¦ç»†å¯æŸ¥çœ‹æºç </span><br><span class="line"></span><br><span class="line">// javascript</span><br><span class="line">// å¤„ç†toggleVideoå‡½æ•°</span><br><span class="line">function toggleVideo() &#123;</span><br><span class="line">    var imgArr = document.getElementsByClassName(&quot;video-btn&quot;)[0].children;</span><br><span class="line">    if (playVariables.playClick) &#123;</span><br><span class="line">        imgArr[1].setAttribute(&quot;class&quot;, &quot;btn-hidden&quot;);</span><br><span class="line">        imgArr[0].setAttribute(&quot;class&quot;, &quot;&quot;);</span><br><span class="line">        document.getElementsByClassName(&quot;video-mask&quot;)[0].style.display = &quot;none&quot;;</span><br><span class="line">        playVariables.playClick = false;</span><br><span class="line">        player.play();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        imgArr[0].setAttribute(&quot;class&quot;, &quot;btn-hidden&quot;);</span><br><span class="line">        imgArr[1].setAttribute(&quot;class&quot;, &quot;&quot;);</span><br><span class="line">        playVariables.playClick = true;</span><br><span class="line">        player.pause();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿›åº¦æ¡è®¡ç®—ä»¥åŠæ—¶é—´æ•°å€¼</span><br><span class="line">// åœ¨initVideoä¸­æ·»åŠ ç›‘å¬å‡½æ•°</span><br><span class="line">// videoå¯ä»¥ç”¨ontimeupdateæ¥è·å–è§†é¢‘æ€»é•¿åº¦å’Œå½“å‰æ’­æ”¾ä½ç½®</span><br><span class="line">// s_to_hså‡½æ•°æ˜¯ç§’è½¬æ—¶åˆ†ç§’å‡½æ•°ï¼Œç™¾åº¦å¯ä»¥æ‰¾åˆ°ï¼Œè¿™é‡Œä¸è´´ä¸Šæ¥ï¼Œæ–‡æœ«æºç è‡ªå–</span><br><span class="line">function initVideo() &#123;</span><br><span class="line">    video = document.createElement(&quot;video&quot;);</span><br><span class="line">    video.preload = &quot;auto&quot;;</span><br><span class="line">    video.crossOrigin = &quot;anonymous&quot;;</span><br><span class="line">    video.src = &quot;./resources/video.mp4&quot;;</span><br><span class="line">    player = video;</span><br><span class="line"></span><br><span class="line">    video.ontimeupdate = function (event) &#123;</span><br><span class="line">        var totalTime = s_to_hs(Math.floor(this.duration));</span><br><span class="line">        document.getElementsByClassName(&quot;total-video-time&quot;)[0].innerHTML = totalTime;</span><br><span class="line"></span><br><span class="line">        var currentTime = s_to_hs(Math.floor(this.currentTime));</span><br><span class="line">        document.getElementsByClassName(&quot;current-video-time&quot;)[0].innerHTML = currentTime;</span><br><span class="line"></span><br><span class="line">        document.getElementById(&quot;progress-play&quot;).style.width = `$&#123;</span><br><span class="line">            (Math.floor(this.currentTime) / Math.floor(this.duration)) * 100</span><br><span class="line">        &#125;%`;</span><br><span class="line">        </span><br><span class="line">        // è§†é¢‘æ’­æ”¾å®Œæ¯•æ—¶å›åˆ°æœ€å¼€å§‹çš„çŠ¶æ€</span><br><span class="line">        if (currentTime === totalTime) &#123;</span><br><span class="line">            video.currentTime = 0;</span><br><span class="line">            toggleVideo();</span><br><span class="line">            document.getElementsByClassName(&quot;video-mask&quot;)[0].style.display = &quot;block&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç‚¹å‡»è¿›åº¦æ¡ï¼Œè§†é¢‘å‰è¿›åˆ°å¯¹åº”çš„ä½ç½®(è¿™è¾¹ç®—çš„å¯èƒ½æœ‰äº›ä¸å‡†ï¼Œæ‰€ä»¥æ“ä½œèµ·æ¥æ€ªæ€ªçš„)</span><br><span class="line">var progressContainer = document.getElementsByClassName(&quot;progress-wrapper&quot;)[0];</span><br><span class="line">progressContainer.addEventListener(&quot;click&quot;, function (event) &#123;</span><br><span class="line">    var progressWidth = document.getElementById(&quot;screenContainer&quot;).offsetWidth - 248;</span><br><span class="line">    var percentage = event.offsetX / progressWidth;</span><br><span class="line">    video.currentTime = video.duration * percentage;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å…¨å±å¤„ç†</span><br><span class="line">function toggleBigScreen() &#123;</span><br><span class="line">    if (playVariables.isBigScreen) &#123;</span><br><span class="line">        exitFullscreen();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        requestFullScreen();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// è¿›å…¥å…¨å±ï¼Œæ›´æ”¹çŠ¶æ€</span><br><span class="line">function requestFullScreen() &#123;</span><br><span class="line">    var de = document.getElementById(&quot;screenContainer&quot;);</span><br><span class="line">    if (de.requestFullscreen) &#123;</span><br><span class="line">        de.requestFullscreen();</span><br><span class="line">    &#125; else if (de.mozRequestFullScreen) &#123;</span><br><span class="line">        de.mozRequestFullScreen();</span><br><span class="line">    &#125; else if (de.webkitRequestFullScreen) &#123;</span><br><span class="line">        de.webkitRequestFullScreen();</span><br><span class="line">    &#125;</span><br><span class="line">    playVariables.isBigScreen = true;</span><br><span class="line">&#125;</span><br><span class="line">// æ¨å‡ºå…¨å±æ›´æ”¹çŠ¶æ€</span><br><span class="line">function exitFullscreen() &#123;</span><br><span class="line">    var de = document;</span><br><span class="line">    if (de.exitFullscreen) &#123;</span><br><span class="line">        de.exitFullscreen();</span><br><span class="line">    &#125; else if (de.mozCancelFullScreen) &#123;</span><br><span class="line">        de.mozCancelFullScreen();</span><br><span class="line">    &#125; else if (de.webkitCancelFullScreen) &#123;</span><br><span class="line">        de.webkitCancelFullScreen();</span><br><span class="line">    &#125;</span><br><span class="line">    playVariables.isBigScreen = false;</span><br><span class="line">&#125;</span><br><span class="line">// ç›‘å¬resizeï¼Œé‡ç½®åœºæ™¯å¤§å°</span><br><span class="line">window.addEventListener(&quot;resize&quot;, function () &#123;</span><br><span class="line">    camera.aspect = videoContainer.clientWidth / videoContainer.clientHeight;</span><br><span class="line">    camera.updateProjectionMatrix();</span><br><span class="line">    renderer.setSize(</span><br><span class="line">        videoContainer.offsetWidth,</span><br><span class="line">        videoContainer.offsetHeight</span><br><span class="line">    );</span><br><span class="line">&#125;, false);</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba0e49d8e9944ded987abd5e8415f877~tplv-k3u1fbpfcp-watermark.image" alt="å±å¹•å½•åˆ¶2021-11-22 ä¸‹åˆ10.20.59.gif"></p><h2 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a>æºç åœ°å€</h2><p>å› ä¸ºgithubä¸èƒ½ä¸Šä¼ å¤§äº100Mçš„æ–‡ä»¶(åŸ4Kè§†é¢‘580M)ï¼Œæ‰€ä»¥æ¼”ç¤ºé¡¹ç›®ä¸­çš„è§†é¢‘æˆ‘å‹ç¼©äº†4æ¬¡ï¼ŒæŠŠä»–å‹ç¼©åˆ°äº†62Mï¼Œå› æ­¤ç”»è´¨å¯èƒ½æœ‰ç‚¹ç³Šäº†ï¼Œä½†ä¸å½±å“ä½¿ç”¨ã€‚</p><p>æœ‰æ¡ä»¶çš„åŒå­¦å¯ä»¥è‡ªå·±å»å¯»æ‰¾ <strong>360å…¨æ™¯è§†é¢‘</strong> æˆ–æ›´æ¢åœ¨çº¿çš„è§†é¢‘è¿æ¥ï¼Œä¸‹é¢æ˜¯æœ¬æ¬¡æ•™ç¨‹çš„æºç å’Œè§†é¢‘èµ„æºä¸‹è½½ç½‘ç«™ï¼š</p><ul><li><a href="https://github.com/ljnMeow/threeJs-FMV.git"> githubåœ°å€ https://github.com/ljnMeow/threeJs-FMV.git </a></li><li><a href="https://www.4k123.com/"> 4k123 https://www.4k123.com/ </a></li></ul>]]></content>
      
      
      <categories>
          
          <category> threejs </category>
          
          <category> å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> threejs </tag>
            
            <tag> å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Echartså®ç°ä¸€ä¸ªä¸‹é’»ä¼ª3dåœ°å›¾</title>
      <link href="/posts/3d1a56d7/"/>
      <url>/posts/3d1a56d7/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¤§å±å¯è§†åŒ–é¡¹ç›®ä¸­æœ‰ä¸ªå±•ç¤ºåœ°å›¾çš„åŠŸèƒ½ï¼Œè¦æ±‚ï¼š</p><ol><li>å¥½çœ‹æ’ç¬¬ä¸€</li><li>æ”¯æŒé’»å…¥é’»å‡º</li><li>èƒ½å•ç‹¬å±•ç¤ºçœä»½ã€åœ°å¸‚ï¼Œå› ä¸ºå®¢æˆ·æ•°æ®æœ‰çš„æ˜¯çœçº§ï¼Œæœ‰çš„æ˜¯å¸‚çº§</li></ol><p>å¾—åˆ°è¿™ä¸ªéœ€æ±‚åç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯Echartsï¼Œæ‰€ä»¥æ‰“å¼€Echartså®˜æ–¹æ¡ˆä¾‹æŸ¥çœ‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªç±»ä¼¼çš„åœ°å›¾ <a href="https://echarts.apache.org/examples/zh/editor.html?c=map-HK">demo</a></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40a3ecfdbd294e29befbef41c7bb26b5~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG174.png"><br>æŸ¥çœ‹å®Œæ•´ä»£ç çœ‹åˆ°ä»–æ˜¯è¯·æ±‚ä¸€ä¸ªè·¯å¾„è·å–æ•°æ®ï¼Œåé—®äº†ä¸‹è·¯å¾„çœ‹åˆ°ä»–æ˜¯ä¸€ä¸²å¸¦åæ ‡çš„jsonæ•°æ®<br><a href="https://cdn.jsdelivr.net/gh/apache/echarts-website@asf-site/examples/data/asset/geo/HK.json">https://cdn.jsdelivr.net/gh/apache/echarts-website@asf-site/examples/data/asset/geo/HK.json</a></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f90bae3bbba74d87967c87fcc2aac290~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG175.png"><br>åˆ°è¿™ä¸€æ­¥æˆ‘æ¶‰åŠåˆ°çŸ¥è¯†ç›²åŒºäº†ï¼Œäºæ˜¯ç™¾åº¦äº†ä¸‹geoJsonï¼Œå‘ç°é˜¿é‡Œäº‘dataVæä¾›ä¸€ä¸ªç½‘ç«™èƒ½è·å–geoJsonæ•°æ®<br><a href="https://datav.aliyun.com/tools/atlas/index.html#&lat=30.332329214580188&lng=106.72278672066881&zoom=3.5">https://datav.aliyun.com/tools/atlas/index.html#&amp;lat=30.332329214580188&amp;lng=106.72278672066881&amp;zoom=3.5</a></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b203bd7bba2487fa11b0a012393caaa~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG176.png"></p><p>æŒ‰ç…§demoæ•™ç¨‹ï¼Œå°è¯•å®ç°ï¼š</p><h2 id="1-å…ˆå¸ƒå±€ä¸€ä¸‹å¹¶å¼•å…¥æ‰€éœ€æ–‡ä»¶"><a href="#1-å…ˆå¸ƒå±€ä¸€ä¸‹å¹¶å¼•å…¥æ‰€éœ€æ–‡ä»¶" class="headerlink" title="1. å…ˆå¸ƒå±€ä¸€ä¸‹å¹¶å¼•å…¥æ‰€éœ€æ–‡ä»¶"></a>1. å…ˆå¸ƒå±€ä¸€ä¸‹å¹¶å¼•å…¥æ‰€éœ€æ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;echarts 3d map&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      * &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .echarts-map &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100vw;</span><br><span class="line">        height: 100vh;</span><br><span class="line">        background: url(&quot;./background.png&quot;) no-repeat;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;echarts-map&quot; id=&quot;3dMap&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/echarts/5.1.2/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6478b29107b74383ad6b0563b836679a~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG177.png"></p><h2 id="2-åœ°å›¾æ¸²æŸ“"><a href="#2-åœ°å›¾æ¸²æŸ“" class="headerlink" title="2. åœ°å›¾æ¸²æŸ“"></a>2. åœ°å›¾æ¸²æŸ“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">let mapEcharts = null;</span><br><span class="line"></span><br><span class="line">if (mapEcharts) &#123;</span><br><span class="line">    mapEcharts.dispose(); // é”€æ¯å®ä¾‹ï¼Œå®ä¾‹é”€æ¯åæ— æ³•å†è¢«ä½¿ç”¨ã€‚</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–å›¾è¡¨</span><br><span class="line">mapEcharts = echarts.init(document.getElementById(&quot;3dMap&quot;));</span><br><span class="line"></span><br><span class="line">// æ•°æ®è¯·æ±‚</span><br><span class="line">// åŠ è½½æ•ˆæœ</span><br><span class="line">mapEcharts.showLoading();</span><br><span class="line"></span><br><span class="line">$.getJSON(&#x27;https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json&#x27;, jsonData =&gt; &#123;</span><br><span class="line">    // æ³¨å†Œåœ°å›¾</span><br><span class="line">    echarts.registerMap(&#x27;china&#x27;, jsonData);</span><br><span class="line"></span><br><span class="line">    // é…ç½®</span><br><span class="line">    let options = &#123;</span><br><span class="line">        series: [</span><br><span class="line">            &#123;</span><br><span class="line">                name: &quot;map&quot;,</span><br><span class="line">                type: &quot;map&quot;, // åœ°å›¾</span><br><span class="line">                map: &#x27;china&#x27;, // åŠ è½½æ³¨å†Œçš„åœ°å›¾</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    mapEcharts.setOption(options); // å®ä¾‹é…ç½®é¡¹ä¸æ•°æ®</span><br><span class="line"></span><br><span class="line">    // éšè—loading</span><br><span class="line">    mapEcharts.hideLoading();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a34ba849e3a4bb6a824e6fda67862ab~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG178.png"><br>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåœ°å›¾åŸºæœ¬å·²ç»å‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¾åŒ–åœ°å›¾ï¼Œåœ¨åœ°å›¾ä¸Šèƒ½çœ‹åˆ°æµ·å—è¯¸å²›çš„æ•°æ®ï¼Œä½†æ˜¯å®é™…ä¸Šæµ·å—è¯¸å²›çš„æ•°æ®å·²ç»åœ¨å³ä¸‹è§’ï¼Œæ‰€ä»¥æˆ‘æ•´ç†äº†ä¸€ä»½æ•°æ®<code>china.js</code>æ”¾åœ¨æœ¬åœ°ï¼Œå„ä½å¤§ä½¬å¯ä»¥åœ¨demoä¸­è‡ªè¡Œè·å–ã€‚</p><h2 id="3-ç¾åŒ–åœ°å›¾"><a href="#3-ç¾åŒ–åœ°å›¾" class="headerlink" title="3. ç¾åŒ–åœ°å›¾"></a>3. ç¾åŒ–åœ°å›¾</h2><p>æ·»åŠ åœ°å›¾æ¸å˜é¢œè‰²ä»¥åŠé€‰ä¸­é¢œè‰²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">let options = &#123;</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;map&quot;,</span><br><span class="line">        type: &quot;map&quot;, // åœ°å›¾</span><br><span class="line">        map: mapName, // åŠ è½½æ³¨å†Œçš„åœ°å›¾</span><br><span class="line">        selectedMode: false, // ä¸è®©å•ç‹¬é€‰ä¸­</span><br><span class="line">        roam: true, // å¼€å§‹é¼ æ ‡äº‹ä»¶ï¼Œscaleç¼©æ”¾ã€moveç§»åŠ¨</span><br><span class="line">        // å›¾å½¢ä¸Šçš„æ–‡æœ¬æ ‡ç­¾</span><br><span class="line">        label: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          color: &quot;#000a3c&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        // åœ°å›¾æ ·å¼</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          // åŒºåŸŸæ ·å¼</span><br><span class="line">          areaColor: &#123;</span><br><span class="line">            type: &quot;radial&quot;,</span><br><span class="line">            x: 0.5,</span><br><span class="line">            y: 0.5,</span><br><span class="line">            r: 3,</span><br><span class="line">            colorStops: [</span><br><span class="line">              &#123;</span><br><span class="line">                offset: 0,</span><br><span class="line">                color: &quot;rgba(223, 231, 242, 1)&quot;, // 0% å¤„çš„é¢œè‰²</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                offset: 1,</span><br><span class="line">                color: &quot;rgba(2, 99, 206, 1)&quot;, // 100% å¤„çš„é¢œè‰²</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">            globalCoord: false, // ç¼ºçœä¸º false</span><br><span class="line">          &#125;,</span><br><span class="line">          borderWidth: 1, // è¾¹æ¡†å¤§å°</span><br><span class="line">          borderColor: &quot;rgba(104, 152, 190, 1)&quot;, // è¾¹æ¡†æ ·å¼</span><br><span class="line">          shadowColor: &quot;rgba(128, 217, 248, 1)&quot;, // é˜´å½±é¢œè‰²</span><br><span class="line">          shadowOffsetX: -2, // é˜´å½±æ°´å¹³æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">          shadowOffsetY: 2, // é˜´å½±å‚ç›´æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">          shadowBlur: 10, // æ–‡å­—å—çš„èƒŒæ™¯é˜´å½±é•¿åº¦</span><br><span class="line">        &#125;,</span><br><span class="line">        // é€‰ä¸­çŠ¶æ€ä¸‹æ ·å¼</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          label: &#123;</span><br><span class="line">            color: &quot;#ffffff&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">          itemStyle: &#123;</span><br><span class="line">            areaColor: &quot;#a5d4fe&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d513f81912444e94b01d22c5dd05af74~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG179.png"></p><h2 id="4-åˆ¶ä½œä¼ª3dæ•ˆæœ"><a href="#4-åˆ¶ä½œä¼ª3dæ•ˆæœ" class="headerlink" title="4. åˆ¶ä½œä¼ª3dæ•ˆæœ"></a>4. åˆ¶ä½œä¼ª3dæ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">let options = &#123;</span><br><span class="line">    geo: &#123;</span><br><span class="line">      map: mapName, //åœ°å›¾ç±»å‹ã€‚</span><br><span class="line">      zoom: 1,</span><br><span class="line">      roam: true,</span><br><span class="line">      animation: false,</span><br><span class="line">      itemStyle: &#123;</span><br><span class="line">        // åŒºåŸŸæ ·å¼</span><br><span class="line">        areaColor: &#123;</span><br><span class="line">          type: &quot;radial&quot;,</span><br><span class="line">          x: 0.5,</span><br><span class="line">          y: 0.5,</span><br><span class="line">          r: 0.8,</span><br><span class="line">          colorStops: [</span><br><span class="line">            &#123;</span><br><span class="line">              offset: 0,</span><br><span class="line">              color: &quot;rgba(147, 235, 248, 1)&quot;, // 0% å¤„çš„é¢œè‰²</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              offset: 1,</span><br><span class="line">              color: &quot;rgba(2, 99, 206, 1)&quot;, // 100% å¤„çš„é¢œè‰²</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">          globalCoord: false, // ç¼ºçœä¸º false</span><br><span class="line">        &#125;,</span><br><span class="line">        shadowColor: &quot;#105781&quot;, //åœ°å›¾åŒºåŸŸçš„é˜´å½±é¢œè‰²ã€‚</span><br><span class="line">        shadowOffsetX: 0,</span><br><span class="line">        shadowOffsetY: 10,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;map&quot;,</span><br><span class="line">        type: &quot;map&quot;, // åœ°å›¾</span><br><span class="line">        map: mapName, // åŠ è½½æ³¨å†Œçš„åœ°å›¾</span><br><span class="line">        selectedMode: false, // ä¸è®©å•ç‹¬é€‰ä¸­</span><br><span class="line">        roam: true, // å¼€å§‹é¼ æ ‡äº‹ä»¶ï¼Œscaleç¼©æ”¾ã€moveç§»åŠ¨</span><br><span class="line">        // å›¾å½¢ä¸Šçš„æ–‡æœ¬æ ‡ç­¾</span><br><span class="line">        label: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          color: &quot;#000a3c&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        // åœ°å›¾æ ·å¼</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          // åŒºåŸŸæ ·å¼</span><br><span class="line">          areaColor: &#123;</span><br><span class="line">            type: &quot;radial&quot;,</span><br><span class="line">            x: 0.5,</span><br><span class="line">            y: 0.5,</span><br><span class="line">            r: 3,</span><br><span class="line">            colorStops: [</span><br><span class="line">              &#123;</span><br><span class="line">                offset: 0,</span><br><span class="line">                color: &quot;rgba(223, 231, 242, 1)&quot;, // 0% å¤„çš„é¢œè‰²</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                offset: 1,</span><br><span class="line">                color: &quot;rgba(2, 99, 206, 1)&quot;, // 100% å¤„çš„é¢œè‰²</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">            globalCoord: false, // ç¼ºçœä¸º false</span><br><span class="line">          &#125;,</span><br><span class="line">          borderWidth: 1, // è¾¹æ¡†å¤§å°</span><br><span class="line">          borderColor: &quot;rgba(104, 152, 190, 1)&quot;, // è¾¹æ¡†æ ·å¼</span><br><span class="line">          shadowColor: &quot;rgba(128, 217, 248, 1)&quot;, // é˜´å½±é¢œè‰²</span><br><span class="line">          shadowOffsetX: -2, // é˜´å½±æ°´å¹³æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">          shadowOffsetY: 2, // é˜´å½±å‚ç›´æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">          shadowBlur: 10, // æ–‡å­—å—çš„èƒŒæ™¯é˜´å½±é•¿åº¦</span><br><span class="line">        &#125;,</span><br><span class="line">        // é€‰ä¸­çŠ¶æ€ä¸‹æ ·å¼</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          label: &#123;</span><br><span class="line">            color: &quot;#ffffff&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">          itemStyle: &#123;</span><br><span class="line">            areaColor: &quot;#a5d4fe&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e1ee391058f4147b5f59adf6c2a72c0~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG180.png"><br>å¯ä»¥çœ‹åˆ°ç°åœ¨å·²ç»æœ‰ä¸€ä¸ªç±»ä¼¼3dçš„é˜´å½±æ•ˆæœ</p><h2 id="5-å®ç°ä¸‹é’»æ•ˆæœ"><a href="#5-å®ç°ä¸‹é’»æ•ˆæœ" class="headerlink" title="5. å®ç°ä¸‹é’»æ•ˆæœ"></a>5. å®ç°ä¸‹é’»æ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">mapEcharts.on(&quot;click&quot;, (params) =&gt; &#123;</span><br><span class="line">    // å½“åŒå‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ¸…é™¤å•å‡»äº‹ä»¶ï¼Œä»…å“åº”åŒå‡»äº‹ä»¶</span><br><span class="line">    clearTimeout(timeFn);</span><br><span class="line">    timeFn = setTimeout(function () &#123;</span><br><span class="line">    if (</span><br><span class="line">      allAreaCode.filter((item) =&gt; item.name.indexOf(params.name) &gt; -1)[0]</span><br><span class="line">    ) &#123;</span><br><span class="line">      let areaCode = allAreaCode.filter(</span><br><span class="line">        (item) =&gt; item.name.indexOf(params.name) &gt; -1</span><br><span class="line">      )[0].code;</span><br><span class="line">      loadMap(</span><br><span class="line">        `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;areaCode&#125;_full.json`</span><br><span class="line">      )</span><br><span class="line">        .then((data) =&gt; &#123;</span><br><span class="line">          initMap(data, areaCode);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(() =&gt; &#123;</span><br><span class="line">          loadMap(</span><br><span class="line">            `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;areaCode&#125;.json`</span><br><span class="line">          )</span><br><span class="line">            .then((res) =&gt; &#123;</span><br><span class="line">              initMap(res, areaCode);</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(() =&gt; &#123;&#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      historyList.push(&#123;</span><br><span class="line">        code: areaCode,</span><br><span class="line">        name: params.name,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      let result = [];</span><br><span class="line">      let obj = &#123;&#125;;</span><br><span class="line">      for (let i = 0; i &lt; historyList.length; i++) &#123;</span><br><span class="line">        if (!obj[historyList[i].code]) &#123;</span><br><span class="line">          result.push(historyList[i]);</span><br><span class="line">          obj[historyList[i].code] = true;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      historyList = result;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;, 250);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>loadMap</code>ä¸ºæ•°æ®è¯·æ±‚å°è£…ï¼Œ<code>initMap</code>ä¸ºæ¸²æŸ“åœ°å›¾ï¼Œåé¢åœ¨å…¨éƒ¨ä»£ç ä¸­ä¼šæ”¾å‡ºæ¥ã€‚</p><p>è¿™é‡Œä¸»è¦é€»è¾‘æ˜¯ç›‘å¬åœ°å›¾ç‚¹å‡»äº‹ä»¶ï¼Œé€šè¿‡ç­›é€‰çš„åˆ°<code>areaCode</code>ï¼Œé€šè¿‡<code>areaCode</code>æ‹¼æ¥è·¯å¾„è¯·æ±‚æ•°æ®ï¼Œè¿™é‡Œçš„åœ°å€èƒ½åœ¨ä¸Šé¢ç½‘ç«™è·å–ï¼Œä¹‹æ‰€ä»¥åˆ†<code>_full</code>å’Œæ™®é€šçš„æ˜¯å› ä¸ºï¼Œåœ°å›¾æ•°æ®æœ‰å¯èƒ½åŒ…å«å­åŒºåŸŸæ•°æ®ï¼Œä¾‹å¦‚å¹¿ä¸œçœå†…åŒ…å«å¹¿å·å¸‚ã€ä½›ä¸Šå¸‚ç­‰â€¦â€¦</p><p><code>allAreaCode</code>æ˜¯æˆ‘èŠ±å¾ˆå¤šæ—¶é—´æœé›†å…¨å›½åœ°åŒºçœå¸‚åŒºcodeæ•°æ®ï¼Œè¿™ä»½æ•°æ®å¯èƒ½æœ‰éƒ¨åˆ†é”™è¯¯ï¼Œæ‡‚çˆ¬è™«çš„å¤§ä½¬å¯ä»¥ç›´æ¥çˆ¬ä¸Šé¢ç½‘ç«™çš„æ•°æ®ï¼Œå¤„ç†æˆæˆ‘çš„æ•°æ®æ ¼å¼å°±è¡Œ</p><p>åœ°å›¾æ¸²æŸ“åæŠŠå†å²è®°å½•æ¨è¿›<code>historyList</code>ä¸­ï¼Œåé¢é’»å‡ºç”¨åˆ°ã€‚</p><h2 id="5-å®ç°é’»å‡ºæ•ˆæœ"><a href="#5-å®ç°é’»å‡ºæ•ˆæœ" class="headerlink" title="5. å®ç°é’»å‡ºæ•ˆæœ"></a>5. å®ç°é’»å‡ºæ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">mapEcharts.on(&quot;dblclick&quot;, (params) =&gt; &#123;</span><br><span class="line">    // å½“åŒå‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ¸…é™¤å•å‡»äº‹ä»¶ï¼Œä»…å“åº”åŒå‡»äº‹ä»¶</span><br><span class="line">    clearTimeout(timeFn);</span><br><span class="line">    if (historyList.length == 1) &#123;</span><br><span class="line">        alert(&quot;å·²ç»åˆ°è¾¾æœ€ä¸Šä¸€çº§åœ°å›¾äº†&quot;);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    let map = historyList.pop();</span><br><span class="line">    if (historyList[historyList.length - 1].code == &quot;china&quot;) &#123;</span><br><span class="line">        initMap(china, &quot;china&quot;, &quot;ä¸­å›½&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        loadMap(</span><br><span class="line">          `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;</span><br><span class="line">            historyList[historyList.length - 1].code</span><br><span class="line">          &#125;_full.json`</span><br><span class="line">        ).then((data) =&gt; &#123;</span><br><span class="line">            initMap(data, historyList[historyList.length - 1].code);</span><br><span class="line">        &#125;).catch(() =&gt; &#123;</span><br><span class="line">        loadMap(</span><br><span class="line">          `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;</span><br><span class="line">            historyList[historyList.length - 1].code</span><br><span class="line">          &#125;.json`</span><br><span class="line">        )</span><br><span class="line">          .then((res) =&gt; &#123;</span><br><span class="line">            initMap(res, historyList[historyList.length - 1].code);</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(() =&gt; &#123;&#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡‡ç”¨åŒå‡»é’»å‡ºæ–¹å¼ï¼ŒåŒå‡»æ—¶ä»å†å²è®°å½•ä¸­åˆ é™¤æœ€åä¸€ä¸ªï¼Œå¹¶ä¸”å–åˆ é™¤åæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ æ•°æ®æ¥æ¸²æŸ“åœ°å›¾</p><h2 id="6-åŒæ­¥mapå±‚ä¸geoå±‚çš„é¼ æ ‡äº‹ä»¶"><a href="#6-åŒæ­¥mapå±‚ä¸geoå±‚çš„é¼ æ ‡äº‹ä»¶" class="headerlink" title="6. åŒæ­¥mapå±‚ä¸geoå±‚çš„é¼ æ ‡äº‹ä»¶"></a>6. åŒæ­¥mapå±‚ä¸geoå±‚çš„é¼ æ ‡äº‹ä»¶</h2><p>å¦‚æœå¼€å¯é¼ æ ‡äº‹ä»¶ï¼Œä¼šå‘ç°æ— è®ºscaleæˆ–è€…moveï¼Œmapå±‚å’Œgeoå±‚éƒ½æ˜¯åˆ†å¼€çš„ï¼Œä¾‹å¦‚ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15671ee2fda04c90b675618b63a2b05a~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG181.png"><br>è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥é€šè¿‡äº‹ä»¶ç›‘å¬æ¥åŒæ­¥ä»–ä»¬çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mapEcharts.on(&quot;georoam&quot;, (params) =&gt; &#123;</span><br><span class="line">  let option = mapEcharts.getOption(); //è·å¾—optionå¯¹è±¡</span><br><span class="line">  if (params.zoom != null &amp;&amp; params.zoom != undefined) &#123;</span><br><span class="line">    //æ•æ‰åˆ°ç¼©æ”¾æ—¶</span><br><span class="line">    option.geo[0].zoom = option.series[0].zoom; //ä¸‹å±‚geoçš„ç¼©æ”¾ç­‰çº§è·Ÿç€ä¸Šå±‚çš„geoä¸€èµ·æ”¹å˜</span><br><span class="line">    option.geo[0].center = option.series[0].center; //ä¸‹å±‚çš„geoçš„ä¸­å¿ƒä½ç½®éšç€ä¸Šå±‚geoä¸€èµ·æ”¹å˜</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    //æ•æ‰åˆ°æ‹–æ›³æ—¶</span><br><span class="line">    option.geo[0].center = option.series[0].center; //ä¸‹å±‚çš„geoçš„ä¸­å¿ƒä½ç½®éšç€ä¸Šå±‚geoä¸€èµ·æ”¹å˜</span><br><span class="line">  &#125;</span><br><span class="line">  mapEcharts.setOption(option); //è®¾ç½®option</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="7-æœ€ç»ˆä»£ç ä¸æ•ˆæœ"><a href="#7-æœ€ç»ˆä»£ç ä¸æ•ˆæœ" class="headerlink" title="7. æœ€ç»ˆä»£ç ä¸æ•ˆæœ"></a>7. æœ€ç»ˆä»£ç ä¸æ•ˆæœ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;echarts 3d map&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      * &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .echarts-map &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100vw;</span><br><span class="line">        height: 100vh;</span><br><span class="line">        background: url(&quot;./background.png&quot;) no-repeat;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;echarts-map&quot; id=&quot;3dMap&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/echarts/5.1.2/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;./china.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;./geoAtlasJson.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    let mapEcharts = null;</span><br><span class="line">    let historyList = [];</span><br><span class="line">    let timeFn = null;</span><br><span class="line"></span><br><span class="line">    if (mapEcharts) &#123;</span><br><span class="line">      mapEcharts.dispose(); // é”€æ¯å®ä¾‹ï¼Œå®ä¾‹é”€æ¯åæ— æ³•å†è¢«ä½¿ç”¨ã€‚</span><br><span class="line">    &#125;</span><br><span class="line">    // åˆå§‹åŒ–å›¾è¡¨</span><br><span class="line">    mapEcharts = echarts.init(document.getElementById(&quot;3dMap&quot;));</span><br><span class="line"></span><br><span class="line">    historyList.push(&#123;</span><br><span class="line">      code: &quot;china&quot;,</span><br><span class="line">      name: &quot;ä¸­å›½&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // åŠ è½½æ•ˆæœ</span><br><span class="line">    mapEcharts.showLoading();</span><br><span class="line"></span><br><span class="line">    initMap(china, &quot;china&quot;, &quot;ä¸­å›½&quot;);</span><br><span class="line"></span><br><span class="line">    mapEcharts.on(&quot;click&quot;, (params) =&gt; &#123;</span><br><span class="line">      // å½“åŒå‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ¸…é™¤å•å‡»äº‹ä»¶ï¼Œä»…å“åº”åŒå‡»äº‹ä»¶</span><br><span class="line">      clearTimeout(timeFn);</span><br><span class="line">      timeFn = setTimeout(function () &#123;</span><br><span class="line">        if (</span><br><span class="line">          allAreaCode.filter((item) =&gt; item.name.indexOf(params.name) &gt; -1)[0]</span><br><span class="line">        ) &#123;</span><br><span class="line">          let areaCode = allAreaCode.filter(</span><br><span class="line">            (item) =&gt; item.name.indexOf(params.name) &gt; -1</span><br><span class="line">          )[0].code;</span><br><span class="line">          loadMap(</span><br><span class="line">            `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;areaCode&#125;_full.json`</span><br><span class="line">          )</span><br><span class="line">            .then((data) =&gt; &#123;</span><br><span class="line">              initMap(data, areaCode);</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(() =&gt; &#123;</span><br><span class="line">              loadMap(</span><br><span class="line">                `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;areaCode&#125;.json`</span><br><span class="line">              )</span><br><span class="line">                .then((res) =&gt; &#123;</span><br><span class="line">                  initMap(res, areaCode);</span><br><span class="line">                &#125;)</span><br><span class="line">                .catch(() =&gt; &#123;&#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">          historyList.push(&#123;</span><br><span class="line">            code: areaCode,</span><br><span class="line">            name: params.name,</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          let result = [];</span><br><span class="line">          let obj = &#123;&#125;;</span><br><span class="line">          for (let i = 0; i &lt; historyList.length; i++) &#123;</span><br><span class="line">            if (!obj[historyList[i].code]) &#123;</span><br><span class="line">              result.push(historyList[i]);</span><br><span class="line">              obj[historyList[i].code] = true;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          historyList = result;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, 250);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    mapEcharts.on(&quot;dblclick&quot;, (params) =&gt; &#123;</span><br><span class="line">      // å½“åŒå‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ¸…é™¤å•å‡»äº‹ä»¶ï¼Œä»…å“åº”åŒå‡»äº‹ä»¶</span><br><span class="line">      clearTimeout(timeFn);</span><br><span class="line">      if (historyList.length == 1) &#123;</span><br><span class="line">        alert(&quot;å·²ç»åˆ°è¾¾æœ€ä¸Šä¸€çº§åœ°å›¾äº†&quot;);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      let map = historyList.pop();</span><br><span class="line">      console.log(historyList[historyList.length - 1])</span><br><span class="line">      if (historyList[historyList.length - 1].code == &quot;china&quot;) &#123;</span><br><span class="line">        initMap(china, &quot;china&quot;, &quot;ä¸­å›½&quot;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        loadMap(</span><br><span class="line">          `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;</span><br><span class="line">            historyList[historyList.length - 1].code</span><br><span class="line">          &#125;_full.json`</span><br><span class="line">        )</span><br><span class="line">          .then((data) =&gt; &#123;</span><br><span class="line">            initMap(data, historyList[historyList.length - 1].code);</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(() =&gt; &#123;</span><br><span class="line">            loadMap(</span><br><span class="line">              `https://geo.datav.aliyun.com/areas_v3/bound/$&#123;</span><br><span class="line">                historyList[historyList.length - 1].code</span><br><span class="line">              &#125;.json`</span><br><span class="line">            )</span><br><span class="line">              .then((res) =&gt; &#123;</span><br><span class="line">                initMap(res, historyList[historyList.length - 1].code);</span><br><span class="line">              &#125;)</span><br><span class="line">              .catch(() =&gt; &#123;&#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    mapEcharts.on(&quot;georoam&quot;, (params) =&gt; &#123;</span><br><span class="line">      let option = mapEcharts.getOption(); //è·å¾—optionå¯¹è±¡</span><br><span class="line">      if (params.zoom != null &amp;&amp; params.zoom != undefined) &#123;</span><br><span class="line">        //æ•æ‰åˆ°ç¼©æ”¾æ—¶</span><br><span class="line">        option.geo[0].zoom = option.series[0].zoom; //ä¸‹å±‚geoçš„ç¼©æ”¾ç­‰çº§è·Ÿç€ä¸Šå±‚çš„geoä¸€èµ·æ”¹å˜</span><br><span class="line">        option.geo[0].center = option.series[0].center; //ä¸‹å±‚çš„geoçš„ä¸­å¿ƒä½ç½®éšç€ä¸Šå±‚geoä¸€èµ·æ”¹å˜</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        //æ•æ‰åˆ°æ‹–æ›³æ—¶</span><br><span class="line">        option.geo[0].center = option.series[0].center; //ä¸‹å±‚çš„geoçš„ä¸­å¿ƒä½ç½®éšç€ä¸Šå±‚geoä¸€èµ·æ”¹å˜</span><br><span class="line">      &#125;</span><br><span class="line">      mapEcharts.setOption(option); //è®¾ç½®option</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // åœ°å›¾æ•°æ®è¯·æ±‚</span><br><span class="line">    async function loadMap(url, pathName) &#123;</span><br><span class="line">      return await $.getJSON(url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åœ°å›¾åˆå§‹åŒ–</span><br><span class="line">    function initMap(mapData, mapName) &#123;</span><br><span class="line">      // æ³¨å†Œåœ°å›¾</span><br><span class="line">      echarts.registerMap(mapName, mapData);</span><br><span class="line"></span><br><span class="line">      // é…ç½®é¡¹</span><br><span class="line">      let options = &#123;</span><br><span class="line">        geo: &#123;</span><br><span class="line">          map: mapName, //åœ°å›¾ç±»å‹ã€‚</span><br><span class="line">          zoom: 1,</span><br><span class="line">          roam: true,</span><br><span class="line">          animation: false,</span><br><span class="line">          itemStyle: &#123;</span><br><span class="line">            // åŒºåŸŸæ ·å¼</span><br><span class="line">            areaColor: &#123;</span><br><span class="line">              type: &quot;radial&quot;,</span><br><span class="line">              x: 0.5,</span><br><span class="line">              y: 0.5,</span><br><span class="line">              r: 0.8,</span><br><span class="line">              colorStops: [</span><br><span class="line">                &#123;</span><br><span class="line">                  offset: 0,</span><br><span class="line">                  color: &quot;rgba(147, 235, 248, 1)&quot;, // 0% å¤„çš„é¢œè‰²</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                  offset: 1,</span><br><span class="line">                  color: &quot;rgba(2, 99, 206, 1)&quot;, // 100% å¤„çš„é¢œè‰²</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">              globalCoord: false, // ç¼ºçœä¸º false</span><br><span class="line">            &#125;,</span><br><span class="line">            shadowColor: &quot;#105781&quot;, //åœ°å›¾åŒºåŸŸçš„é˜´å½±é¢œè‰²ã€‚</span><br><span class="line">            shadowOffsetX: 0,</span><br><span class="line">            shadowOffsetY: 10,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: &quot;map&quot;,</span><br><span class="line">            type: &quot;map&quot;, // åœ°å›¾</span><br><span class="line">            map: mapName, // åŠ è½½æ³¨å†Œçš„åœ°å›¾</span><br><span class="line">            selectedMode: false, // ä¸è®©å•ç‹¬é€‰ä¸­</span><br><span class="line">            roam: true, // å¼€å§‹é¼ æ ‡äº‹ä»¶ï¼Œscaleç¼©æ”¾ã€moveç§»åŠ¨</span><br><span class="line">            // å›¾å½¢ä¸Šçš„æ–‡æœ¬æ ‡ç­¾</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: true,</span><br><span class="line">              color: &quot;#000a3c&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            // åœ°å›¾æ ·å¼</span><br><span class="line">            itemStyle: &#123;</span><br><span class="line">              // åŒºåŸŸæ ·å¼</span><br><span class="line">              areaColor: &#123;</span><br><span class="line">                type: &quot;radial&quot;,</span><br><span class="line">                x: 0.5,</span><br><span class="line">                y: 0.5,</span><br><span class="line">                r: 3,</span><br><span class="line">                colorStops: [</span><br><span class="line">                  &#123;</span><br><span class="line">                    offset: 0,</span><br><span class="line">                    color: &quot;rgba(223, 231, 242, 1)&quot;, // 0% å¤„çš„é¢œè‰²</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &#123;</span><br><span class="line">                    offset: 1,</span><br><span class="line">                    color: &quot;rgba(2, 99, 206, 1)&quot;, // 100% å¤„çš„é¢œè‰²</span><br><span class="line">                  &#125;,</span><br><span class="line">                ],</span><br><span class="line">                globalCoord: false, // ç¼ºçœä¸º false</span><br><span class="line">              &#125;,</span><br><span class="line">              borderWidth: 1, // è¾¹æ¡†å¤§å°</span><br><span class="line">              borderColor: &quot;rgba(104, 152, 190, 1)&quot;, // è¾¹æ¡†æ ·å¼</span><br><span class="line">              shadowColor: &quot;rgba(128, 217, 248, 1)&quot;, // é˜´å½±é¢œè‰²</span><br><span class="line">              shadowOffsetX: -2, // é˜´å½±æ°´å¹³æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">              shadowOffsetY: 2, // é˜´å½±å‚ç›´æ–¹å‘ä¸Šçš„åç§»è·ç¦»</span><br><span class="line">              shadowBlur: 10, // æ–‡å­—å—çš„èƒŒæ™¯é˜´å½±é•¿åº¦</span><br><span class="line">            &#125;,</span><br><span class="line">            // é€‰ä¸­çŠ¶æ€ä¸‹æ ·å¼</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">              label: &#123;</span><br><span class="line">                color: &quot;#ffffff&quot;,</span><br><span class="line">              &#125;,</span><br><span class="line">              itemStyle: &#123;</span><br><span class="line">                areaColor: &quot;#a5d4fe&quot;,</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br><span class="line">      mapEcharts.setOption(options); // å®ä¾‹é…ç½®é¡¹ä¸æ•°æ®</span><br><span class="line"></span><br><span class="line">      // éšè—loading</span><br><span class="line">      mapEcharts.hideLoading();</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>demo githubåœ°å€ï¼š<a href="https://github.com/ljnMeow/echarts-map">https://github.com/ljnMeow/echarts-map</a></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d25338abfd44b13b0211e78cbe8c28e~tplv-k3u1fbpfcp-watermark.image" alt="æ•ˆæœå›¾.gif"></p><h2 id="8-æœ€åçš„è¯"><a href="#8-æœ€åçš„è¯" class="headerlink" title="8. æœ€åçš„è¯"></a>8. æœ€åçš„è¯</h2><p>åœ¨åˆ¶ä½œè¿™ä»½demoæ—¶å…¶å®æ˜¯èŠ±äº†æŒºå¤šæ—¶é—´çš„ï¼Œæœ€å¼€å§‹æ˜¯æƒ³é€šè¿‡<code>echarts-gl</code>ç›´æ¥å®ç°ä¸€ä¸ª3dåœ°å›¾ï¼Œä½†é€šè¿‡å®˜æ–¹æ–‡æ¡£æ¥çœ‹<code>echarts-gl</code>çš„<code>map3d</code>å¥½åƒä¸æ”¯æŒæ¸å˜èƒŒæ™¯ï¼Œæ‰€ä»¥å°±ç›´æ¥æ”¾å¼ƒäº†ï¼Œå…¶æ¬¡å°±æ˜¯æœé›†çœå¸‚åŒºæ‰€æœ‰æ•°æ®èŠ±è´¹çš„æ—¶é—´ï¼Œä¸å¾—ä¸æ„Ÿå¹æˆ‘ä»¬å¤§åå¤æ˜¯çœŸçš„åœ°å¤§ç‰©åšã€‚</p><p>æœ€åå¸Œæœ›è¿™ä»½æ•™ç¨‹å¯¹å„ä½æœ‰å¸®åŠ©ï¼Œè§‰å¾—okçš„è¯éº»çƒ¦ç•™ä¸ªèµğŸ‘ï¼Œæˆ–è€…githubç»™ç‚¹starğŸŒŸä¹Ÿè¡ŒğŸ™ã€‚</p><p>ç¥å„ä½å¤§ä½¬æ­¥æ­¥é«˜å‡ğŸ§¨</p>]]></content>
      
      
      <categories>
          
          <category> å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯è§†åŒ– </tag>
            
            <tag> Echarts </tag>
            
            <tag> åœ°å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cordovaçƒ­æ›´æ–°ä¸Appæ›´æ–°</title>
      <link href="/posts/47b24aa1/"/>
      <url>/posts/47b24aa1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>cordovaçƒ­æ›´æ–°åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç½‘é¡µé™æ€å†…å®¹æ›´æ–°å’Œcordovaæ’ä»¶æ›´æ–°ï¼Œç½‘é¡µé™æ€å†…å®¹æ˜¯åŸºäºcordovaè¿è¡Œçš„ï¼Œä¾‹å¦‚ç¬¬ä¸‰æ–¹ç™»é™†QQã€å¾®ä¿¡éœ€è¦é›†æˆQQã€å¾®ä¿¡çš„æ’ä»¶æ‰èƒ½å®ç°</p></blockquote><h2 id="é›†æˆæ›´æ–°çƒ­æ›´æ–°æ’ä»¶"><a href="#é›†æˆæ›´æ–°çƒ­æ›´æ–°æ’ä»¶" class="headerlink" title="é›†æˆæ›´æ–°çƒ­æ›´æ–°æ’ä»¶"></a>é›†æˆæ›´æ–°çƒ­æ›´æ–°æ’ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ’ä»¶</span></span><br><span class="line">cordova plugin add cordova-hot-code-push-plugin</span><br><span class="line"><span class="comment">// å…¨å±€å®‰è£…çƒ­æ›´æ–°å·¥å…·</span></span><br><span class="line">npmæˆ–cnpm install -g cordova-hot-code-push-cli</span><br><span class="line"><span class="comment">// åœ¨cordovaæ ¹ç›®å½•ä¸Šæ‰§è¡Œå‘½ä»¤æ·»åŠ cordova-hcp.jsonæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯çƒ­æ›´æ–°æ–‡ä»¶chcp.jsonçš„æ¨¡ç‰ˆ</span></span><br><span class="line">cordova-hcp init</span><br><span class="line"></span><br><span class="line"><span class="title class_">Running</span> init</span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Enter</span> project name (required):  cordovaVueDemo  <span class="comment">// é¡¹ç›®åç§°</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Amazon</span> <span class="variable constant_">S3</span> <span class="title class_">Bucket</span> name (required <span class="keyword">for</span> cordova-hcp deploy):  <span class="comment">// äºšé©¬é€ŠS3å‚¨å­˜æ¡¶åå­—ï¼Œå¯ä»¥è·³è¿‡</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Path</span> <span class="keyword">in</span> <span class="variable constant_">S3</span> bucket (optional <span class="keyword">for</span> cordova-hcp deploy):  <span class="comment">// S3å‚¨å­˜æ¡¶è·¯å¾„ï¼Œå¯ä»¥è·³è¿‡</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Amazon</span> <span class="variable constant_">S3</span> region (required <span class="keyword">for</span> cordova-hcp deploy):  (us-east-<span class="number">1</span>)  <span class="comment">// äºšé©¬é€ŠS3åœ°åŒºï¼Œå¯ä»¥è·³è¿‡</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="variable constant_">IOS</span> app <span class="attr">identifier</span>:  <span class="comment">// IOSåº”ç”¨ç¨‹åºå•†åº—çš„åº”ç”¨ç¨‹åºIDã€‚Appå‡çº§æ˜¯è·³è½¬åº”ç”¨å•†åº—è¿›è¡Œå‡çº§</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Android</span> app <span class="attr">identifier</span>:  <span class="comment">// Android Appåœ¨åº”ç”¨å•†åŸçš„åœ°å€ï¼Œæˆ–è€…Appçš„ä¸‹è½½åœ°å€</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Update</span> method (required):  (resume) start <span class="comment">// æ‰§è¡Œæ›´æ–°çš„æ–¹æ³• start(å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶)  resume(æ¢å¤åº”ç”¨ç¨‹åºæ—¶ï¼Œæ¯”å¦‚ä»æ§åˆ¶å°åˆ‡æ¢åˆ°å‰æ™¯)  now(ä¸‹è½½å®Œæ›´æ–°ç«‹å³å®‰è£…)</span></span><br><span class="line"><span class="title class_">Please</span> <span class="attr">provide</span>: <span class="title class_">Enter</span> full <span class="variable constant_">URL</span> to directory where cordova-hcp build result will be <span class="attr">uploaded</span>:  <span class="attr">http</span>:<span class="comment">//xxxxxx.com/www  // wwwèµ„æºæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„åœ°å€</span></span><br><span class="line"><span class="title class_">Project</span> initialized and cordova-hcp.<span class="property">json</span> file created.</span><br><span class="line"><span class="title class_">If</span> you wish to exclude files <span class="keyword">from</span> being published, specify them <span class="keyword">in</span> .<span class="property">chcpignore</span></span><br><span class="line"><span class="title class_">Before</span> you can push updates you need to run <span class="string">&quot;cordova-hcp login&quot;</span> <span class="keyword">in</span> project directory</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦å¤–ç”Ÿæˆcordova-hcp.jsonæ–‡ä»¶åè¿˜éœ€è¦åœ¨æ–‡ä»¶ä¸­æ·»åŠ &quot;autogenerated&quot;: true</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸æ·»åŠ æ›´æ–°å°†æ— æ•ˆï¼Œæ“ä½œå®Œæˆåå®Œæ•´çš„cordova-hcp.jsonæ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·</span></span><br><span class="line"><span class="comment">// æ·»åŠ iosMinVersionã€androidVersionä»¥æ§åˆ¶Appç‰ˆæœ¬ï¼Œæ’ä»¶æ›´æ–°éœ€è¦é‡è£…appæ‰èƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cordovaVueDemo&quot;</span>, <span class="comment">// å¯ä¸ºç©º</span></span><br><span class="line">  <span class="string">&quot;autogenerated&quot;</span>: <span class="literal">true</span>, <span class="comment">// å¦‚æœä¸æ·»åŠ ï¼Œçƒ­æ›´æ–°ä¼šä¸èƒ½ä½¿ç”¨</span></span><br><span class="line">  <span class="string">&quot;ios_identifier&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// åº”ç”¨åœ¨App store id(å¯ä¸ºç©º)</span></span><br><span class="line">  <span class="string">&quot;android_identifier&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// åº”ç”¨åœ¨åº”ç”¨å•†åŸä¸Šçš„åœ°å€æˆ–è€…Appçš„ä¸‹è½½åœ°å€(å¯ä¸ºç©º)</span></span><br><span class="line">  <span class="string">&quot;update&quot;</span>: <span class="string">&quot;start&quot;</span>, <span class="comment">// åœ¨åº”ç”¨å¯åŠ¨æ—¶å®‰è£…</span></span><br><span class="line">  <span class="string">&quot;content_url&quot;</span>: <span class="string">&quot;http://xxxxxx/cordova/www&quot;</span>, <span class="comment">// wwwæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„åœ°å€</span></span><br><span class="line">  <span class="string">&quot;iosMinVersion&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, <span class="comment">// iosç‰ˆæœ¬ï¼Œé€šè¿‡è¿™ä¸ªåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ä¸‹è½½appï¼Œä¸€èˆ¬æ˜¯æ›´æ–°äº†cordovaæ’ä»¶æ‰éœ€è¦æ”¹å˜è¿™ä¸ª</span></span><br><span class="line">  <span class="string">&quot;androidVersion&quot;</span>: <span class="string">&quot;1.0.0&quot;</span> <span class="comment">// androidç‰ˆæœ¬ï¼Œé€šè¿‡è¿™ä¸ªåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ä¸‹è½½appï¼Œä¸€èˆ¬æ˜¯æ›´æ–°äº†cordovaæ’ä»¶æ‰éœ€è¦æ”¹å˜è¿™ä¸ª</span></span><br><span class="line">  <span class="string">&quot;updateLog&quot;</span>: <span class="string">&quot;æ›´æ–°æ—¥å¿—&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨WWWæ–‡ä»¶å¤¹ç”Ÿæˆchcp-jsonå’Œchcp-mainfestæ–‡ä»¶"><a href="#åœ¨WWWæ–‡ä»¶å¤¹ç”Ÿæˆchcp-jsonå’Œchcp-mainfestæ–‡ä»¶" class="headerlink" title="åœ¨WWWæ–‡ä»¶å¤¹ç”Ÿæˆchcp.jsonå’Œchcp.mainfestæ–‡ä»¶"></a>åœ¨WWWæ–‡ä»¶å¤¹ç”Ÿæˆchcp.jsonå’Œchcp.mainfestæ–‡ä»¶</h2><ul><li><p>chcp.json  åŒ…å«cordova-hcp.jsonæ¨¡ç‰ˆä¸­çš„ä¿¡æ¯ã€æœ€æ–°å‘å¸ƒä¿¡æ¯ã€èµ„æºæ—¶é—´ã€native sideç‰ˆæœ¬å·</p></li><li><p>chcp.mainfest  åŒ…å«çƒ­æ›´æ–°é™æ€æ–‡ä»¶ä¿¡æ¯(èµ„æºæ–‡ä»¶åå’Œå¯¹åº”çš„hashå€¼ï¼Œæ›´æ–°çš„æ—¶å€™ä¼šé€šè¿‡å¯¹åº”çš„hashå€¼æ¥åŒ¹é…å¯¹åº”çš„æ–‡ä»¶è¾¾åˆ°ç²¾ç¡®æ›´æ–°)</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">cordova-hcp build</span><br><span class="line"><span class="comment">// æ‰§è¡Œå®Œå‘½ä»¤ä¼šåœ¨æ¨¡ç‰ˆå½“ä¸­æ·»åŠ &quot;release&quot;:&quot;å½“å‰æ—¶é—´&quot;å­—æ®µï¼Œæˆ‘ä»¬åˆ¤æ–­æ›´æ–°æ—¶å°±æ˜¯é€šè¿‡è¿™ä¸ªå­—æ®µè¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="string">&quot;release&quot;</span>: <span class="string">&quot;2021.06.17-16.30.20&quot;</span>, <span class="comment">// å”¯ä¸€webé¡¹ç›®ç‰ˆæœ¬å·,ç”¨ä¸çƒ­æ›´æ–°webå†…å®¹çš„æ›´æ–°ã€‚ï¼ˆå¿…éœ€ï¼‰ </span></span><br></pre></td></tr></table></figure><h2 id="config-xmlé…ç½®"><a href="#config-xmlé…ç½®" class="headerlink" title="config.xmlé…ç½®"></a>config.xmlé…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨config.xmlä¸‹æ–¹æ‰¾ä¸ªä½ç½®æ·»åŠ </span></span><br><span class="line">&lt;chcp&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">config-file</span> <span class="attr">url</span>=<span class="string">&quot;http://xxxxxx/cordova/www/chcp.json&quot;</span> /&gt;</span></span> <span class="comment">// é…ç½®æ–‡ä»¶ chcp.json ä»æœåŠ¡å™¨ä¸ŠåŠ è½½çš„è·¯å¾„ï¼ˆå¿…é¡»çš„é…ç½®é¡¹ï¼‰</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">auto-download</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span> <span class="comment">// æ˜¯å¦è‡ªåŠ¨ä¸‹è½½æ›´æ–°ï¼Œé»˜è®¤ä¸ºtrueï¼Œå› ä¸ºæˆ‘æ˜¯é€šè¿‡æ–¹æ³•æ‰‹åŠ¨æ›´æ–°çš„ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºfalse</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">auto-install</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span> <span class="comment">// æ˜¯å¦è‡ªåŠ¨å®‰è£…æ›´æ–°ï¼Œé»˜è®¤ä¸ºtrueï¼Œå› ä¸ºæˆ‘æ˜¯é€šè¿‡æ–¹æ³•æ‰‹åŠ¨æ›´æ–°çš„ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºfalse</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">native-interface</span> <span class="attr">version</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span> <span class="comment">// å½“å‰ native side çš„ç‰ˆæœ¬å·</span></span><br><span class="line">&lt;/chcp&gt; </span><br></pre></td></tr></table></figure><h2 id="çƒ­æ›´æ–°éƒ¨ç½²"><a href="#çƒ­æ›´æ–°éƒ¨ç½²" class="headerlink" title="çƒ­æ›´æ–°éƒ¨ç½²"></a>çƒ­æ›´æ–°éƒ¨ç½²</h2><p>åœ¨è¿™ä¸€æ­¥ç›´æ¥å°†wwwæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶æ›¿æ¢æœåŠ¡å™¨ä¸Šçš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯wwwæ–‡ä»¶åœ¨æœåŠ¡åœ°åœ°å€ä¸€å®šè¦ä¸<code>&quot;content_url&quot;:&quot;http://************/cordova/www&quot;</code>å’Œconfig.xmlä¸­<code>&lt;config-file url=&quot;https://************/cordova/www/chcp.json&quot; /&gt;</code> å¡«å†™çš„åœ°å€ä¸€è‡´ï¼Œè¿™æ˜¯åé‡å¯Appï¼Œçƒ­æ›´æ–°å°±åº”è¯¥èƒ½æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯æˆ‘ä»¬å°†â€auto-downloadâ€ å’Œ â€œauto-installâ€è®¾ç½®ä¸ºfalseï¼Œæ‰€ä»¥æ›´æ–°ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦ç¼–å†™æ›´æ–°é€»è¾‘</p><h2 id="æ›´æ–°é€»è¾‘ç¼–è¾‘"><a href="#æ›´æ–°é€»è¾‘ç¼–è¾‘" class="headerlink" title="æ›´æ–°é€»è¾‘ç¼–è¾‘"></a>æ›´æ–°é€»è¾‘ç¼–è¾‘</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä½¿ç”¨çš„æ˜¯vueé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘çš„å†™æ³•å°±æŒ‰ç…§vueçš„æ¥</span></span><br><span class="line"><span class="comment">// åˆ›å»ºutil.jsæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">  <span class="comment">// é…ç½®çƒ­æ›´æ–°æœåŠ¡åœ°å€</span></span><br><span class="line">  <span class="title function_">chcpConfigure</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      chcp.<span class="title function_">configure</span>(</span><br><span class="line">        &#123; <span class="string">&quot;config-file&quot;</span>: process.<span class="property">env</span>.<span class="property">VUE_APP_CHCP_SERVER</span> &#125;,</span><br><span class="line">        <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title class_">Toast</span>(<span class="string">&quot;çƒ­æ›´æ–°åœ°å€é…ç½®å‡ºé”™&quot;</span>);</span><br><span class="line">            <span class="title function_">reject</span>();</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è·å–çƒ­æ›´æ–°ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="title function_">chcpGetVersion</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      chcp.<span class="title function_">getVersionInfo</span>(<span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å­˜åœ¨æ›´æ–°</span></span><br><span class="line">  <span class="title function_">chcpFetchUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      chcp.<span class="title function_">fetchUpdate</span>(<span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å®‰è£…å·²ä¸‹è½½æ›´æ–°</span></span><br><span class="line">  <span class="title function_">chcpInstallUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      chcp.<span class="title function_">installUpdate</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Util</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨App.vueæ–‡ä»¶ä¸­ç¼–å†™é€»è¾‘</span></span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">&quot;@/common/util&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">getAppChcpVersion</span>(<span class="params"></span>) &#123;</span><br><span class="line">      util.<span class="title function_">chcpGetVersion</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">versionData</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">checkedAppUpdate</span>(versionData, <span class="number">0</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">checkedAppUpdate</span>(<span class="params">versionData, type</span>) &#123;</span><br><span class="line">      <span class="comment">// type 0 è‡ªåŠ¨æ£€æµ‹  1 æ‰‹åŠ¨æ›´æ–°</span></span><br><span class="line">      <span class="keyword">const</span> self = <span class="variable language_">this</span>;</span><br><span class="line">      <span class="comment">// getOnlineVersion å‡½æ•°æ˜¯ç›´æ¥ç”¨axios.getæ–¹æ³•è¯·æ±‚çº¿ä¸ŠæœåŠ¡å™¨wwwçš„chcp.jsonæ–‡ä»¶ï¼Œè·å–åˆ°é‡Œé¢çš„æ•°æ®ï¼Œç”¨æ¥å¯¹æ¯”</span></span><br><span class="line">      <span class="title function_">getOnlineVersion</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> iosMinVersion = <span class="title class_">Number</span>(res.<span class="property">iosMinVersion</span>.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&quot;&quot;</span>)),</span><br><span class="line">          androidVersion = <span class="title class_">Number</span>(res.<span class="property">androidVersion</span>.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&quot;&quot;</span>)),</span><br><span class="line">          appVersion = <span class="title class_">Number</span>(versionData.<span class="property">appVersion</span>.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å…è®¸å¢é‡è¿˜æ˜¯å¿…é¡»ä¸‹è½½å®Œæ•´App</span></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          (util.<span class="title function_">isAndroid</span>() &amp;&amp; appVersion &lt; androidVersion) ||</span><br><span class="line">          (util.<span class="title function_">isIos</span>() &amp;&amp; appVersion &lt; iosMinVersion)</span><br><span class="line">        ) &#123;</span><br><span class="line">          self.<span class="property">$dialog</span></span><br><span class="line">            .<span class="title function_">alert</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&quot;æ ‡é¢˜&quot;</span>,</span><br><span class="line">              <span class="attr">message</span>: <span class="string">&quot;è¯·å‰å¾€å¹¶ä¸‹è½½å®Œæ•´App&quot;</span>,</span><br><span class="line">              <span class="attr">theme</span>: <span class="string">&quot;round-button&quot;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;appä¸‹è½½åœ°å€&quot;</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (versionData.<span class="property">currentWebVersion</span> != res.<span class="property">release</span>) &#123;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å¼ºåˆ¶æ›´æ–°</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">updateType</span> == <span class="number">1</span>) &#123;</span><br><span class="line">              self.$toast(&#123;</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&quot;ç³»ç»Ÿå¼ºåˆ¶æ›´æ–°ï¼ï¼ï¼&quot;</span>,</span><br><span class="line">                <span class="title function_">onClose</span>(<span class="params"></span>) &#123;</span><br><span class="line">                  self.<span class="title function_">checkedHasFetchUpdate</span>();</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              self.<span class="property">$dialog</span></span><br><span class="line">                .<span class="title function_">confirm</span>(&#123;</span><br><span class="line">                  <span class="attr">title</span>: <span class="string">&quot;è½¯ä»¶æ›´æ–°&quot;</span>,</span><br><span class="line">                  <span class="attr">message</span>: res.<span class="property">updateLog</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  self.<span class="title function_">checkedHasFetchUpdate</span>();</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">checkedHasFetchUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$toast</span>.<span class="title function_">loading</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;æ›´æ–°ä¸­...&quot;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      util</span><br><span class="line">        .<span class="title function_">chcpFetchUpdate</span>()</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">          util</span><br><span class="line">            .<span class="title function_">chcpInstallUpdate</span>()</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.$toast(<span class="string">&quot;æˆåŠŸå®‰è£…æ›´æ–°&quot;</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">              <span class="variable language_">this</span>.$toast(<span class="string">&quot;æ›´æ–°å®‰è£…å‡ºé”™&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">          <span class="variable language_">this</span>.$toast(<span class="string">&quot;æ›´æ–°åŒ…è·å–å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">      <span class="string">&quot;deviceready&quot;</span>,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAppChcpVersion</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// å¦‚æœæ²¡é—®é¢˜çš„è¯åˆ°äº†è¿™ä¸€æ­¥çƒ­æ›´æ–°å°±èƒ½æ­£å¸¸æ‰§è¡Œï¼Œæ‰“å¼€Appæ—¶å°±ä¼šæ‰§è¡Œæ–¹æ³•ï¼Œæœ‰æ›´æ–°çš„è¯å°±ä¼šå¼¹å‡ºæç¤ºè¦æ±‚æ›´æ–° </span></span><br></pre></td></tr></table></figure><h2 id="çƒ­æ›´æ–°æ–¹æ³•"><a href="#çƒ­æ›´æ–°æ–¹æ³•" class="headerlink" title="çƒ­æ›´æ–°æ–¹æ³•"></a>çƒ­æ›´æ–°æ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•åç§°</th><th>å›è°ƒå‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>chcp.isUpdateAvailableForInstallation</td><td>(error, data)</td><td>åˆ¤æ–­æ˜¯å¦å­˜åœ¨å·²ä¸‹è½½å®Œæˆçš„æ›´æ–°å¯ç”¨äºå®‰è£…</td></tr><tr><td>chcp.fetchUpdate</td><td>(error, data)</td><td>è·å–æœåŠ¡å™¨ç‰ˆæœ¬çŠ¶æ€ï¼Œå¦‚å­˜åœ¨æ›´æ–°ï¼Œåˆ™ä¸‹è½½æ›´æ–°æ–‡ä»¶</td></tr><tr><td>chcp.installUpdate</td><td>(error)</td><td>å®‰è£…å·²ä¸‹è½½çš„æ›´æ–°</td></tr></tbody></table><h2 id="çƒ­æ›´æ–°äº‹ä»¶"><a href="#çƒ­æ›´æ–°äº‹ä»¶" class="headerlink" title="çƒ­æ›´æ–°äº‹ä»¶"></a>çƒ­æ›´æ–°äº‹ä»¶</h2><table><thead><tr><th>äº‹ä»¶åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>chcp_updateIsReadyToInstall</td><td>æ–°ç‰ˆæœ¬æˆåŠŸä¸‹è½½ï¼Œå‡†å¤‡æ›´æ–°</td></tr><tr><td>chcp_updateLoadFailed</td><td>æ’ä»¶æ— æ³•ä»æœåŠ¡å™¨ä¸­è·å–æ›´æ–°æ•°æ®</td></tr><tr><td>chcp_nothingToUpdate</td><td>æ’ä»¶ä»æˆåŠŸæœåŠ¡å™¨ä¸­è·å–æ›´æ–°æ•°æ®é…ç½®ï¼Œä½†ä¸å­˜åœ¨æ–°ç‰ˆæœ¬</td></tr><tr><td>chcp_beforeInstall</td><td>æ›´æ–°å®‰è£…å‰</td></tr><tr><td>chcp_updateInstalled</td><td>æ›´æ–°æˆåŠŸå®‰è£…å</td></tr><tr><td>chcp_updateInstallFailed</td><td>å®‰è£…æ›´æ–°å‡ºé”™</td></tr><tr><td>chcp_nothingToInstall</td><td>æœªå®‰è£…ä»»ä½•æ›´æ–°ï¼›å¯èƒ½æ˜¯æœªå…ˆä¸‹è½½æ›´æ–°å†…å®¹</td></tr><tr><td>chcp_beforeAssetsInstalledOnExternalStorage</td><td>æ’ä»¶å‡†å¤‡ä¸‹è½½æ›´æ–°å†…å®¹åˆ°å­˜å‚¨ä¸­</td></tr><tr><td>chcp_assetsInstalledOnExternalStorage</td><td>æ’ä»¶æˆåŠŸä¸‹è½½æ›´æ–°å†…å®¹åˆ°å­˜å‚¨ä¸­</td></tr><tr><td>chcp_assetsInstallationError</td><td>æ’ä»¶ä¸‹è½½æ›´æ–°å†…å®¹å‡ºé”™ï¼›å¯èƒ½æ˜¯å› ä¸ºå­˜å‚¨ç©ºé—´ä¸è¶³ç­‰åŸå› </td></tr></tbody></table><h2 id="é”™è¯¯ä»£ç "><a href="#é”™è¯¯ä»£ç " class="headerlink" title="é”™è¯¯ä»£ç "></a>é”™è¯¯ä»£ç </h2><table><thead><tr><th>é”™è¯¯ä»£ç </th><th>é”™è¯¯åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>NOTHING_TO_INSTALL</td><td>å‘é€äº†å®‰è£…æ›´æ–°çš„è¯·æ±‚ï¼Œä½†æœªæ‰¾åˆ°ä»»ä½•æ›´æ–°å†…å®¹</td></tr><tr><td>2</td><td>NOTHING_TO_UPDATE</td><td>ä¸å­˜åœ¨æ›´æ–°å†…å®¹</td></tr><tr><td>-1</td><td>FAILED_TO_DOWNLOAD_APPLICATION_CONFIG</td><td>æ— æ³•ä»æœåŠ¡å™¨ä¸­ä¸‹è½½æ›´æ–°é…ç½®æ–‡ä»¶ï¼›å¯èƒ½æ˜¯é…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–å­˜åœ¨ç½‘ç»œé—®é¢˜</td></tr><tr><td>-2</td><td>APPLICATION_BUILD_VERSION_TOO_LOW</td><td>å®¢æˆ·ç«¯ç‰ˆæœ¬ä½äºæ›´æ–°è¦æ±‚ï¼›éœ€é‡æ–°ä¸‹è½½æ–°ç‰ˆæœ¬çš„APKæˆ–IPA</td></tr><tr><td>-3</td><td>FAILED_TO_DOWNLOAD_CONTENT_MANIFEST</td><td>ä¸‹è½½æ›´æ–°å†…å®¹æ ¡éªŒæ–‡ä»¶å‡ºé”™ï¼›å¯èƒ½æ˜¯content_urlé…ç½®é”™è¯¯å¯¼è‡´</td></tr><tr><td>-4</td><td>FAILED_TO_DOWNLOAD_UPDATE_FILES</td><td>æ£€æŸ¥chcp.manifestï¼Œé‡Œé¢ç½—åˆ—çš„æ‰€æœ‰æ–‡ä»¶å¿…é¡»æ”¾åœ¨æœåŠ¡å™¨å¯¹åº”ä½ç½®ï¼Œè€Œä¸”æ¯ä¸ªæ–‡ä»¶çš„æ ¡éªŒå€¼å¿…é¡»å’Œchcp.manifesté‡Œé¢çš„ä¸€è‡´</td></tr><tr><td>-5</td><td>FAILED_TO_MOVE_LOADED_FILES_TO_INSTALLATION_FOLDER</td><td>ç§»åŠ¨ä¸‹è½½çš„æ›´æ–°æ–‡ä»¶åˆ°å®‰è£…ç›®å½•æ—¶å‡ºé”™ï¼Œå¯èƒ½æ˜¯å› ä¸ºè®¾å¤‡ç©ºé—´ä¸è¶³</td></tr><tr><td>-6</td><td>UPDATE_IS_INVALID</td><td>ä¸‹è½½çš„æ›´æ–°åŒ…æ— æ•ˆï¼›å¯èƒ½æ˜¯å› ä¸ºä¸‹è½½çš„æ–‡ä»¶å’Œchcp.manifesté‡Œé¢çš„æ ¡éªŒå€¼ä¸ä¸€è‡´å¯¼è‡´çš„</td></tr><tr><td>-7</td><td>FAILED_TO_COPY_FILES_FROM_PREVIOUS_RELEASE</td><td>ä»æ—§ç‰ˆæœ¬ä¸­æ‹·è´wwwç›®å½•åˆ°æ–°ç‰ˆæœ¬ç›®å½•æ—¶å‡ºé”™ï¼Œå¯èƒ½æ˜¯å› ä¸ºè®¾å¤‡ç©ºé—´ä¸è¶³</td></tr><tr><td>-8</td><td>FAILED_TO_COPY_NEW_CONTENT_FILES</td><td>å¤åˆ¶æ–°æ–‡ä»¶åˆ°å®‰è£…ç›®å½•å‡ºé”™ï¼Œå¯èƒ½æ˜¯å› ä¸ºè®¾å¤‡ç©ºé—´ä¸è¶³</td></tr><tr><td>-9</td><td>LOCAL_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND</td><td>ä»å­˜å‚¨ç©ºé—´è¯»å–é…ç½®æ–‡ä»¶æ—¶å‡ºé”™ï¼›å¯èƒ½æ˜¯å› ä¸ºé…ç½®æ–‡ä»¶è¢«æ‰‹åŠ¨åˆ é™¤äº†ï¼›æ’ä»¶å°†è¯»å–ä¸Šæ¬¡é…ç½®</td></tr><tr><td>-10</td><td>LOCAL_VERSION_OF_MANIFEST_NOT_FOUND</td><td>ä»å­˜å‚¨ç©ºé—´è¯»å–æ ¡éªŒæ–‡ä»¶æ—¶å‡ºé”™ï¼›å¯èƒ½æ˜¯å› ä¸ºæ ¡éªŒæ–‡ä»¶è¢«æ‰‹åŠ¨åˆ é™¤äº†ï¼›æ’ä»¶å°†è¯»å–ä¸Šæ¬¡é…ç½®</td></tr><tr><td>-11</td><td>LOADED_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND</td><td>è¯»å–æ–°ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶å‡ºé”™ï¼›å‘ç”Ÿåœ¨å®‰è£…æ›´æ–°è¿‡ç¨‹ä¸­ï¼›å¯èƒ½åŸå› æ˜¯ç”¨æˆ·æ‰‹åŠ¨åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼›è¯¥æ–‡ä»¶å¤¹å°†åœ¨ä¸‹æ¬¡Appè¿è¡Œæ—¶è¿˜åŸ</td></tr><tr><td>-12</td><td>LOADED_VERSION_OF_MANIFEST_NOT_FOUND</td><td>è¯»å–æ–°ç‰ˆæœ¬çš„æ ¡éªŒæ–‡ä»¶å‡ºé”™ï¼›å‘ç”Ÿåœ¨å®‰è£…æ›´æ–°è¿‡ç¨‹ä¸­ï¼›å¯èƒ½åŸå› æ˜¯ç”¨æˆ·æ‰‹åŠ¨åˆ é™¤äº†è¯¥æ–‡ä»¶ï¼›è¯¥æ–‡ä»¶å¤¹å°†åœ¨ä¸‹æ¬¡Appè¿è¡Œæ—¶è¿˜åŸ</td></tr><tr><td>-13</td><td>FAILED_TO_INSTALL_ASSETS_ON_EXTERNAL_STORAGE</td><td>ä»å®‰è£…ç›®å½•å¤åˆ¶wwwæ–‡ä»¶å¤¹åˆ°å­˜å‚¨å¡æ—¶å‡ºé”™ï¼›å¯èƒ½æ˜¯å› ä¸ºå­˜å‚¨ç©ºé—´ä¸è¶³ï¼›å‘ç”Ÿåœ¨åº”ç”¨ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼›è¯¥é”™è¯¯å°†å¯¼è‡´æ’ä»¶æ— æ³•æ­£å¸¸å·¥ä½œ</td></tr><tr><td>-14</td><td>CANT_INSTALL_WHILE_DOWNLOAD_IN_PROGRESS</td><td>åœ¨ä¸‹è½½çš„è¿‡ç¨‹ä¸­è°ƒç”¨äº†å®‰è£…æ›´æ–°çš„å‘½ä»¤ï¼›å¿…é¡»å¾—ç­‰ä¸‹è½½å®Œæˆåæ‰å¯ä»¥è°ƒç”¨å®‰è£…å‘½ä»¤</td></tr><tr><td>-15</td><td>CANT_DOWNLOAD_UPDATE_WHILE_INSTALLATION_IN_PROGRESS</td><td>åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­è°ƒç”¨äº†ä¸‹è½½æ›´æ–°çš„å‘½ä»¤ï¼›å¿…é¡»å¾—ç­‰å®‰è£…å®Œæˆåæ‰å¯ä»¥è°ƒç”¨ä¸‹è½½å‘½ä»¤</td></tr><tr><td>-16</td><td>INSTALLATION_ALREADY_IN_PROGRESS</td><td>åœ¨å®‰è£…è¿‡ç¨‹ä¸­åˆå†æ¬¡è°ƒç”¨äº†å®‰è£…å‘½ä»¤</td></tr><tr><td>-17</td><td>DOWNLOAD_ALREADY_IN_PROGRESS</td><td>åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­åˆå†æ¬¡è°ƒç”¨äº†ä¸‹è½½å‘½ä»¤</td></tr><tr><td>-18</td><td>ASSETS_FOLDER_IN_NOT_YET_INSTALLED</td><td>åœ¨åº”ç”¨ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œæ’ä»¶æ­£åœ¨å¤åˆ¶wwwæ–‡ä»¶åˆ°å­˜å‚¨ç©ºé—´çš„æ—¶å€™ï¼Œè°ƒç”¨äº†chcp çƒ­æ›´æ–°çš„æ–¹æ³•</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> cordova </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cordova </tag>
            
            <tag> Vue </tag>
            
            <tag> Hybird App </tag>
            
            <tag> App å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æŠŠæ‰‹å°†Cordovaåº”ç”¨ä¸Šæ¶App Store</title>
      <link href="/posts/7e873fc6/"/>
      <url>/posts/7e873fc6/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>ä¸Šæ¶iosåº”ç”¨éœ€è¦å‡†å¤‡å‡ æ ·ä¸œè¥¿</p><ol><li><p>ä¸€å°è£…æœ‰XCodeçš„MacBookç”µè„‘ï¼Œç”¨æ¥ç¼–è¯‘é¡¹ç›®</p></li><li><p>æ³¨å†ŒApple Developer ä¸ªäººè´¦å·ï¼Œåœ¨æ‰¾æŒæ¡Apple Developerä¼ä¸šè´¦å·çš„äººï¼Œå«ä»–æŠŠä½ åŠ è¿›ç»„ç»‡ï¼Œè¿™æ ·ä½ å°±èƒ½ç”¨ä½ è‡ªå·±çš„è´¦å·æ“ä½œ</p></li><li><p>ä¸€å°è‹¹æœæ‰‹æœºï¼Œä¸»è¦ç”¨æ¥çœŸæœºæµ‹è¯•</p></li></ol><h2 id="åˆ›å»ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶"><a href="#åˆ›å»ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶" class="headerlink" title="åˆ›å»ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶"></a>åˆ›å»ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶</h2><p>è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼Œä¸€èˆ¬ç§°å‘¼ä¸ºCSRï¼Œä¸€ä¼šè¯·æ±‚è¯ä¹¦éœ€è¦ç”¨åˆ°è¿™ä¸ªä¸œè¥¿ï¼Œé¦–å…ˆæ‰“å¼€åº”ç”¨ç¨‹åº &gt; å®ç”¨å·¥å…· &gt; é’¥åŒ™ä¸²è®¿é—®.appï¼Œå·¦ä¸Šè§’ç‚¹å‡»é’¥åŒ™ä¸²è®¿é—® &gt; è¯ä¹¦åŠ©ç† &gt; ä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦â€¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68878689f8804ce1a78751318cacdeff~tplv-k3u1fbpfcp-watermark.image" alt="WeChat9afe26fb996f8f93dd742597766da134.png"></p><p>åœ¨å¦‚ä¸‹å›¾ç•Œé¢ï¼Œç”¨æˆ·ç”µå­é‚®ä»¶åœ°å€ï¼šå¡«ä½ å¼€å‘è€…è´¦å·æ³¨å†Œé‚®ç®±ï¼Œå¸¸ç”¨åç§°ï¼šéšä¾¿èµ·ä½†æ˜¯è¦æ–¹ä¾¿å¯»æ‰¾ï¼Œé€‰æ‹©å‚¨å­˜åœ¨ç£ç›˜(CAç”µå­é‚®ä»¶åœ°å€å°±ä¸ç”¨å¡«äº†)ï¼Œæ”¾åˆ°æ¡Œé¢ä¸Šï¼Œæœ€å¥½è·Ÿé¡¹ç›®æ”¾åˆ°ä¸€èµ·</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c7a2628130c43878adf969257a27762~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG777.png"></p><p>æœ‰CSRä¹‹åå°±å¯ä»¥å»è‹¹æœå¼€å‘ä¸­å¿ƒç”Ÿæˆè¯ä¹¦äº†</p><h2 id="ç™»é™†è‹¹æœå¼€å‘è€…ä¸­å¿ƒç”Ÿæˆè¯ä¹¦"><a href="#ç™»é™†è‹¹æœå¼€å‘è€…ä¸­å¿ƒç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç™»é™†è‹¹æœå¼€å‘è€…ä¸­å¿ƒç”Ÿæˆè¯ä¹¦"></a>ç™»é™†è‹¹æœå¼€å‘è€…ä¸­å¿ƒç”Ÿæˆè¯ä¹¦</h2><p>ç™»é™†å¼€å‘è€…ä¸­å¿ƒåçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œç‚¹å‡»ä¸‹é¢æ¡†æ¡†çš„é‚£å—</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d58f5be117144a7094387ee3782f2fb5~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG778.png"></p><p>ç”³è¯·è¯ä¹¦</p><p>ä¸€ä¸‹æ“ä½œéœ€è¦æ‰§è¡Œä¸¤æ¬¡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæµ‹è¯•è¯ä¹¦å’Œä¸€ä¸ªå‘å¸ƒè¯ä¹¦</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15785d91d2da41cfa37bbb8998beb873~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG779.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8dbf1015e2d43bc965d9b51710ab7a7~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG780.png"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a117f50ce08b489b96f1ed31f32faf61~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG781.png"></p><p>ç‚¹å‡»downloadå°†è¯ä¹¦ä¸‹è½½åˆ°æœ¬åœ°</p><p>æ³¨æ„ï¼šè¯ä¹¦ä¸‹è½½åˆ°æœ¬åœ°åä¸€å®šè¦åŒå‡»ä¸€ä¸‹å¯¼å…¥é’¥åŒ™ä¸²é‡Œé¢</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42ee675c0a20418f9b859e70998c1f80~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG782.png"></p><h2 id="æ³¨å†ŒApp-Identiifier"><a href="#æ³¨å†ŒApp-Identiifier" class="headerlink" title="æ³¨å†ŒApp Identiifier"></a>æ³¨å†ŒApp Identiifier</h2><p>åªæœ‰æ³¨å†Œäº†App Idï¼Œä½ æ‰å¯ä»¥åœ¨App Store Connectä¸­æ–°å»ºApp</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/661e9c6734ae4f5bace4052bafb3751e~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG783.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4acacc5703ee4048adb27b598e447177~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG784.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1703579a102b4f43a88cc4725aa80a28~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG785.png"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/279512fdcaed4f3a90513672f6db81c4~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG786.png"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bb09c14c467407487b72413f43ec339~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG787.png"></p><p>ç‚¹å‡»Registerï¼ŒApp Idæ³¨å†ŒæˆåŠŸ</p><h2 id="æ³¨å†ŒçœŸæœºæµ‹è¯•æ‰€ç”¨çš„è®¾å¤‡"><a href="#æ³¨å†ŒçœŸæœºæµ‹è¯•æ‰€ç”¨çš„è®¾å¤‡" class="headerlink" title="æ³¨å†ŒçœŸæœºæµ‹è¯•æ‰€ç”¨çš„è®¾å¤‡"></a>æ³¨å†ŒçœŸæœºæµ‹è¯•æ‰€ç”¨çš„è®¾å¤‡</h2><p>çœŸæœºæµ‹è¯•æ‰€ç”¨çš„è®¾å¤‡å¿…é¡»åœ¨å¼€å‘è€…ä¸­å¿ƒæ³¨å†Œï¼Œå¦åˆ™åº”ç”¨è£…ä¸ä¸Šå»</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a4e778ad08342ff8ad64bd7559a5047~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG788.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/682959974b704d0990cff6184aaa53c3~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG792.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a50af4167baf4698bd5bdb1a1db5f99c~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG790.png"></p><p>ç‚¹å‡»Registeræ³¨å†ŒæˆåŠŸ</p><h2 id="æ³¨å†Œé…ç½®æ–‡ä»¶"><a href="#æ³¨å†Œé…ç½®æ–‡ä»¶" class="headerlink" title="æ³¨å†Œé…ç½®æ–‡ä»¶"></a>æ³¨å†Œé…ç½®æ–‡ä»¶</h2><p>è¯¥æ“ä½œåŒä¸Šé¢ä¸€æ ·ä¹Ÿéœ€è¦æ‰§è¡Œä¸¤æ¬¡ï¼Œåˆ†åˆ«ç”¨æµ‹è¯•è¯ä¹¦å’Œå‘å¸ƒè¯ä¹¦æ³¨å†Œdebugå’Œreleaseçš„é…ç½®æ–‡ä»¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶éœ€è¦é¼ æ ‡åŒå‡»å¯¼å…¥XCodeï¼Œè¦ä¸ç„¶é…ç½®æ—¶é€‰ä¸åˆ°</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/159abb8cf1734beba7603ba65a976cec~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG793.jpeg"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e28124d1d774a4b8de2174f2cb4d033~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG794.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55d62cc2db44498a8ad4fe2e92f8b6b3~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG795.png"></p><p>ç‚¹å‡»ç¡®å®šåå°±èƒ½downloadé…ç½®æ–‡ä»¶ï¼Œdownloadä¸‹è½½åè®°ä½ä¸€å®šè¦åŒå‡»å¯¼å…¥XCode</p><h2 id="åœ¨App-Store-connectä¸­åˆ›å»ºæ–°çš„App"><a href="#åœ¨App-Store-connectä¸­åˆ›å»ºæ–°çš„App" class="headerlink" title="åœ¨App Store connectä¸­åˆ›å»ºæ–°çš„App"></a>åœ¨App Store connectä¸­åˆ›å»ºæ–°çš„App</h2><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d49416e191646eaa8b643d2411ef860~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG809.jpeg"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1506a19d6fba4957a50c594a5c2e7f86~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG810.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e87c1fcef28b4d9085235ffa132d9f44~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG811.png"></p><p>åˆ›å»ºæˆåŠŸåé‡Œé¢çš„ä¿¡æ¯èƒ½å¡«çš„å°½é‡å¡«ä¸‹ï¼Œè¦ä¸ä¼šæäº¤ä¸äº†ï¼Œé‡Œé¢è¿˜æœ‰ä¸€ä¸ªæ„å»ºç‰ˆæœ¬ï¼Œè¿™ä¸ªæ˜¯éœ€è¦åœ¨XCodeä¸­æ‰“åŒ…æœ€åç”±XCodeä¼ ä¸Šæ¥çš„</p><h2 id="Xcodeæ„å»ºåº”ç”¨"><a href="#Xcodeæ„å»ºåº”ç”¨" class="headerlink" title="Xcodeæ„å»ºåº”ç”¨"></a>Xcodeæ„å»ºåº”ç”¨</h2><p>åœ¨æ„å»ºåº”ç”¨æ—¶è¯´æ˜ä¸‹ï¼Œè‹¹æœå®˜æ–¹å‘å‡ºçš„å£°æ˜è¯´ï¼š2020å¹´3æœˆä¹‹å‰å·²ç»ä¸Šçº¿çš„é¡¹ç›®ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨UIWebViewç»§ç»­è¿­ä»£ç‰ˆæœ¬ï¼Œæ¯æ¬¡æäº¤å®¡æ ¸ä¼šæ”¶åˆ°è‹¹æœçš„è­¦å‘Šé‚®ä»¶ï¼›2020å¹´3æœˆä¹‹åçš„é¡¹ç›®ï¼Œå¿…é¡»ä½¿ç”¨WKWebViewï¼Œæäº¤å®¡æ ¸æ‰èƒ½é€šè¿‡ï¼Œä¸ç„¶æç¤ºäºŒè¿›åˆ¶æ•°æ®é”™è¯¯ã€‚è¯¦æƒ…è‹¹æœå®˜æ–¹è¯´æ˜ç‚¹å‡»ä¸‹é¢é“¾æ¥</p><p>ITMS-90809: Deprecated API Usage - Apple will stop accepting submissions of new apps that use UIWebView APIs starting from April 2020. See <a href="https://links.jianshu.com/go?to=https://developer.apple.com/documentation/uikit/uiwebview">https://developer.apple.com/documentation/uikit/uiwebview</a> for more information.</p><p>åœ¨cordova-ios6.1.0ä¹‹å‰æˆ‘ä»¬æ˜¯é€šè¿‡ä¸€ä¸ªå®˜æ–¹æ’ä»¶å°†UIWebviewè½¬æˆWKWebviewï¼Œç”¨æ³•å¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cordova plugin add cordova-plugin-wkwebview-engine</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨config.xmlåšå‡ºåŠ å…¥é…ç½®</span></span><br><span class="line">&lt;preference name=<span class="string">&quot;WKWebViewOnly&quot;</span> value=<span class="string">&quot;true&quot;</span> /&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">feature</span> <span class="attr">name</span>=<span class="string">&quot;CDVWKWebViewEngine&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ios-package&quot;</span> <span class="attr">value</span>=<span class="string">&quot;CDVWKWebViewEngine&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">feature</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">&quot;CordovaWebViewEngine&quot;</span> <span class="attr">value</span>=<span class="string">&quot;CDVWKWebViewEngine&quot;</span> /&gt;</span></span> </span><br></pre></td></tr></table></figure><p>cordova-ios6.1.0ä¹‹åå·²ç»å°†UIWebviewå®Œå…¨å‰”é™¤ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¸Šé¢é‚£ä¸ªæ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cordova platform add ios@<span class="number">6.1</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨WKWebviewæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¯·æ±‚æ¥å£æˆ–è€…è·å–æ‰‹æœºæœ¬åœ°å›¾ç‰‡ä¼šå‘ç”Ÿè·¨åŸŸï¼Œè¿™æ˜¯å› ä¸ºWKWebviewå®‰å…¨æœºåˆ¶çš„é—®é¢˜ï¼ŒåŸå…ˆUIWebviewæ˜¯æ”¯æŒè·¨åŸŸçš„ï¼Œæ¥å£è¯·æ±‚çš„è·¨åŸŸæˆ‘ä»¬å¯ä»¥é€šè¿‡åå°é…ç½®è·¨åŸŸè¯·æ±‚ï¼Œæ‰‹æœºæœ¬åœ°å›¾ç‰‡è·¨åŸŸæˆ‘ä»¬åœ¨XCodeä¸­æ‰¾åˆ°CDVWKWebViewEngine.mæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">- (<span class="title class_">WKWebViewConfiguration</span>*) <span class="attr">createConfigurationFromSettings</span>:(<span class="title class_">NSDictionary</span>*)settings</span><br><span class="line">&#123;    </span><br><span class="line">    <span class="title class_">WKWebViewConfiguration</span>* configuration = [[<span class="title class_">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">    ...</span><br><span class="line">    è¿™é‡Œè¿˜æœ‰ä¸€éƒ¨åˆ†ä»£ç ï¼Œä¸ç”¨åˆ é™¤</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//åœ¨returnä¸Šé¢æ·»åŠ ä¸‹é¢ä¸¤è¡Œä»£ç </span></span><br><span class="line">    [configuration.<span class="property">preferences</span> <span class="attr">setValue</span>:@<span class="variable constant_">YES</span> <span class="attr">forKey</span>:@<span class="string">&quot;allowFileAccessFromFileURLs&quot;</span>];</span><br><span class="line">    [configuration <span class="attr">setValue</span>:@<span class="variable constant_">YES</span> <span class="attr">forKey</span>:@<span class="string">&quot;_allowUniversalAccessFromFileURLs&quot;</span>];</span><br><span class="line">    <span class="keyword">return</span> configuration;</span><br><span class="line">&#125;</span><br><span class="line">è§£å†³è·¨åŸŸé—®é¢˜ï¼Œ<span class="title class_">Cookie</span>è·å–ä¸åˆ°çš„æƒ…å†µã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿›å» platform  &gt;  iosç›®å½•ï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªcordova-iosé¡¹ç›®ï¼Œåœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæŠŠä¸€äº›èƒ½åšçš„ä¸œè¥¿åšäº†ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹è¿›å…¥  é¡¹ç›®å &gt; Images.xcassetsç›®å½•ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯åº”ç”¨çš„å›¾è¡¨ä»¥åŠå¯åŠ¨å›¾ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŠŠåº”ç”¨å›¾è¡¨ç»™æ›¿æ¢äº†ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ä¸€æ¬¾å«Asset Catalog Creatorçš„è½¯ä»¶ï¼Œå¯¼å…¥ä¸€å¼ 1024*1024çš„å›¾ç‰‡å°±å¯ä»¥ç”Ÿæˆæˆ‘ä»¬é¡¹ç›®æ‰€éœ€è¦çš„App iconï¼Œæˆ‘ä»¬æŠŠå®ƒç”Ÿæˆçš„AppIcon.appiconsetæ–‡ä»¶å¤¹æ›¿æ¢æ‰åŸæ¥çš„AppIcon.appiconsetæ–‡ä»¶å¤¹ï¼Œè¿™æ ·iconå°±é…ç½®å®Œæˆäº†</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ac8494e532146689c26f9a6c1436bc8~tplv-k3u1fbpfcp-watermark.image" alt="WeChat913f0ecd287e4e9c700360b69443dd55.png"></p><p>åŒå‡»xxxxxxx.xcodeproæ–‡ä»¶å°†é¡¹ç›®å¯¼å…¥XCodeï¼Œä¸‹é¢è¿›è¡ŒXCodeçš„é…ç½®<br><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e732e94015574a5bb0aa819bcd5740c2~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG816.png"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f729cd80ddc4327ac427960d4de0155~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG815.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbc2d144d9624f3f93b3361d4d26d7c6~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG817.png"></p><p>åˆ°è¿™ä¸€æ­¥æˆ‘ä»¬åº”ç”¨åŸºç¡€é…ç½®ã€è¯ä¹¦é…ç½®ã€ä¿¡æ¯é…ç½®åŸºæœ¬å®Œæˆ</p><h2 id="åº”ç”¨æ‰“åŒ…å’Œæµ‹è¯•"><a href="#åº”ç”¨æ‰“åŒ…å’Œæµ‹è¯•" class="headerlink" title="åº”ç”¨æ‰“åŒ…å’Œæµ‹è¯•"></a>åº”ç”¨æ‰“åŒ…å’Œæµ‹è¯•</h2><p>æµ‹è¯•æˆ‘ä»¬åˆ†ä¸¤ç§æ–¹æ³•ï¼Œæ¨¡æ‹Ÿå™¨æµ‹è¯•å’ŒçœŸæœºæµ‹è¯•</p><p>çœŸæœºæµ‹è¯•æ–¹æ³•ä¸€æ ·ï¼Œå‰ææ˜¯ç”¨æ¥æµ‹è¯•çš„æ‰‹æœºå¿…é¡»æ˜¯åœ¨å¼€å‘è€…ä¸­å¿ƒæ³¨å†Œè¿‡çš„ï¼Œè¦ä¸ç„¶å®‰è£…åŒ…è£…ä¸è¿›å»ã€‚æŠŠæ‰‹æœºè¿æ¥æ•°æ®çº¿æ’ä»¶æ¥ï¼ŒXCodeä¼šè‡ªåŠ¨æ£€æµ‹æ³¨å†Œè¿‡çš„æ‰‹æœºï¼Œä¹‹åæ‰“å¼€ä¸‹æ‹‰æ¡†å°±èƒ½çœ‹åˆ°çœŸæœºåç§°ï¼Œä¹‹åé€‰æ‹©å†ç‚¹å‡»ä¸‰è§’å½¢å³å¯</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd750483aa1b4308993de96b91198c1b~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG818å‰¯æœ¬.png"></p><h2 id="åº”ç”¨æäº¤"><a href="#åº”ç”¨æäº¤" class="headerlink" title="åº”ç”¨æäº¤"></a>åº”ç”¨æäº¤</h2><p>åº”ç”¨ç»è¿‡æµ‹è¯•è¿‡åå°±å¯ä»¥æ‰“åŒ…æ„å»ºç‰ˆæœ¬æäº¤åˆ°App Store Connectä¸­è¿›è¡Œå®¡æ ¸äº†</p><p>æ‰“å¼€ä¸‹æ‹‰æ¡†é€‰ä¸­å°é”¤å­ï¼Œåœ¨ç‚¹å‡»Product &gt; Archiveå°±å¯ä»¥æ‰“åŒ…æ„å»ºç‰ˆæœ¬ï¼Œæ‰“åŒ…æˆåŠŸåä¼šå‡ºç°æœ‰å›¾ç•Œé¢ï¼Œæ¥ä¸‹æ¥å…ˆæ‰§è¡Œç¬¬ä¸€æ­¥éªŒè¯æ„å»ºç‰ˆæœ¬ï¼Œå¦‚æœéªŒè¯ä¸é€šè¿‡çš„è¯å°±ç®—æäº¤ä¸Šå»ä¹Ÿæ˜¯å®¡æ ¸ä¸è¿‡çš„ï¼ŒéªŒè¯é€šè¿‡äº†å°±å¯ä»¥æ‰§è¡Œç¬¬äºŒæ­¥ä¸Šä¼ æ„å»ºç‰ˆæœ¬ï¼Œä¸€èˆ¬æ¥è¯´ä¼šå› ä¸ºç½‘ç»œé—®é¢˜å¡ä¸€æ®µæ—¶é—´ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œä¸Šä¼ æˆåŠŸäº†ä¸€èˆ¬è¿‡ä¸€ä¼šå°±èƒ½åœ¨App Store Connectä¸­æ‰¾åˆ°æ„å»ºç‰ˆæœ¬ï¼Œä¹‹åå¡«å†™ç›¸å…³èµ„æ–™å°±å¯ä»¥æäº¤å®¡æ ¸äº†</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b711587cfb6a4701905b1e52b9fb6c6b~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG820.png"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bb3b5ae1fcb4c6d9d5fe8a163e6465b~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG822.png"></p><p>ä¸Šä¼ æˆåŠŸäº†ä½†æ˜¯åˆä¸å‡ºç°æ„å»ºç‰ˆæœ¬ï¼Œè¿™æ—¶å€™è¯·æ³¨æ„è‡ªå·±çš„é‚®ç®±ï¼Œä¸€èˆ¬æœ‰é—®é¢˜çš„æ„å»ºç‰ˆæœ¬éƒ½ä¸ä¼šå‡ºç°åœ¨App Store Connectä¸­</p><h2 id="é—®é¢˜åˆ—ä¸¾"><a href="#é—®é¢˜åˆ—ä¸¾" class="headerlink" title="é—®é¢˜åˆ—ä¸¾"></a>é—®é¢˜åˆ—ä¸¾</h2><p>åˆ—ä¸¾å‡ ä¸ªæˆ‘é‡åˆ°çš„é—®é¢˜ï¼š</p><ul><li><strong>TMS-90809: Deprecated API Usage</strong>  - New apps that use UIWebView are no longer accepted. Instead, use WKWebView for improved security and reliability. Learn more (<a href="https://developer.apple.com/documentation/uikit/uiwebview">https://developer.apple.com/documentation/uikit/uiwebview</a>).</li></ul><p>&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;è¿™ä¸ªæ˜¯åŸå› ä¸Šé¢å·²ç»æè¿‡ï¼Œå› ä¸ºiosç°åœ¨å·²ç»å¼ƒç”¨UIWebViewäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æäº¤çš„æ„å»ºç‰ˆæœ¬å…¨éƒ¨éƒ½è¦æ˜¯ç”¨WKWebviewï¼Œè¦ä¸ç„¶å°±ç®—ä¸Šä¼ æˆåŠŸäº† App Store Connectä¹Ÿä¼šå› ä¸ºå…ƒæ•°æ®å‡ºé”™ä¸ºç”±æ‹’ç»</p><ul><li><strong>ITMS-90683: Missing Purpose String in Info.plist</strong>  - Your appâ€™s code references one or more APIs that access sensitive user data. The appâ€™s Info.plist file should contain a NSBluetoothAlwaysUsageDescription key with a user-facing purpose string explaining clearly and completely why your app needs the data. Starting Spring 2019, all apps submitted to the App Store that access user data are required to include a purpose string. If youâ€™re using external libraries or SDKs, they may reference APIs that require a purpose string. While your app might not use these APIs, a purpose string is still required. You can contact the developer of the library or SDK and request they release a version of their code that doesnâ€™t contain the APIs. Learn more (<a href="https://developer.apple.com/documentation/uikit/core_app/protecting_the_user_s_privacy">https://developer.apple.com/documentation/uikit/core_app&#x2F;protecting_the_user_s_privacy</a>).</li></ul><p>&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;å‡ºç°è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæˆ‘åº”ç”¨ç”¨åˆ°äº†è“ç‰™åŠŸèƒ½ï¼ˆNSBluetoothAlwaysUsageDescriptionï¼‰ä½†æ˜¯å¹¶æ²¡æœ‰åœ¨info.plistä¸Šå£°æ˜æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬å›åˆ°info.plistä¸ŠæŠŠè¿™ä¸ªæƒé™å£°æ˜ä¸€ä¸‹å°±å¥½</p><ul><li>Guideline 2.1 - Information Needed - Weâ€™re looking forward to continuing our review, but we need more information about your business model and your users to help you find the best distribution option for your app. Our preliminary review of your app suggests that your app may be a good fit for our Apple Business Manager program, which is designed specifically for business apps.</li></ul><p>&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;è¿™ä¸ªé—®é¢˜ä¸€èˆ¬æ˜¯å®¡æ ¸çš„äººå¯¹è¿™ä¸ªåº”ç”¨æœ‰ä¸€äº›ç–‘é—®ï¼Œä»–ä¼šæå‡ºå‡ ä¸ªé—®é¢˜éœ€è¦ä½ å›ç­”ï¼Œè¿™æ—¶å€™ä½ åªéœ€è¦è®¤çœŸç”¨åŒè¯­æ¥å›ç­”ä»–çš„é—®é¢˜å°±è¡Œï¼Œè®°ä½æ–‡å­—ä¸€å®šè¦å‹å¥½</p><ul><li>ä¸€ä¸ªä¸­è§„ä¸­çŸ©çš„åº”ç”¨ä¸€èˆ¬ä¸ä¼šè¢«æ‹’ç»ï¼Œè¢«æ‹’ç»çš„ä¸€èˆ¬ä¸€èˆ¬æ˜¯åº”ç”¨åŠŸèƒ½åŒ…å«æš—ç¤ºèµŒåšã€æš´åŠ›ã€è‰²æƒ…ç­‰å†…å®¹ï¼Œæˆ–è€…æ˜¯é›†æˆçš„åŸç”ŸåŠŸèƒ½ä½¿ç”¨äº†ä¸è¢«appleè®¤å¯çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™æ—¶å€™åªæœ‰æ›´æ¢æ’ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬åº”ç”¨çš„åŸç”ŸåŠŸèƒ½éƒ½æ˜¯é€šè¿‡Cordova pluginé›†æˆè¿›æ¥çš„ï¼Œä¾‹å¦‚ï¼šä¸‹é¢çš„é”™è¯¯æ˜¯å› ä¸º æˆ‘ä½¿ç”¨çš„ä¸€ä¸ªæ’ä»¶é‡Œé¢ç”¨äº†ä¸€ä¸ªä¸è¢«è®¤å¯çš„ä¸‰æ–¹åº“ï¼Œè¿™ç§æƒ…å†µè¿å‰é¢ç‰ˆæœ¬éªŒè¯éƒ½è¿‡ä¸å»</li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc00b97e8ca743abae06ba6036cb8595~tplv-k3u1fbpfcp-watermark.image" alt="WeChatf127e9540ae61ac279bba41eabeeeb5d.png"></p>]]></content>
      
      
      <categories>
          
          <category> cordova </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cordova </tag>
            
            <tag> Vue </tag>
            
            <tag> Hybird App </tag>
            
            <tag> App å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cordova + Vueåˆ›å»ºHybird App</title>
      <link href="/posts/c01f837c/"/>
      <url>/posts/c01f837c/</url>
      
        <content type="html"><![CDATA[<h2 id="Cordovaä»‹ç»"><a href="#Cordovaä»‹ç»" class="headerlink" title="Cordovaä»‹ç»"></a>Cordovaä»‹ç»</h2><blockquote><p>Cordovaæ˜¯ç”±Apache åŸºé‡‘ä¼šæ”¯æŒçš„ä½¿ç”¨ HTML5 + CSS3 + JS æ¥æ„å»ºå¤šå¹³å° APP ç¨‹åºçš„å¼€å‘æ¡†æ¶ã€‚å…¶æ”¯æŒè°ƒç”¨æ‰‹æœºç³»ç»Ÿï¼ˆAndroidã€IOSã€Windows phoneï¼‰åŸç”Ÿ APIï¼Œå®ƒå¯ä»¥å°†ä½ å†™çš„ Web ç¨‹åºåŒ…è£¹è¿›åŸç”Ÿçš„ APP å£³ä¸­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ Hybrid APP ï¼ˆæ··åˆåº”ç”¨ï¼‰ã€‚æœ¬æ–‡æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘è€…å¦‚ä½•ä» 0 å¼€å§‹ç»“åˆ Vue æ¥æ„å»ºä¸€ä¸ªç®€å•çš„ APP</p></blockquote><h2 id="ç¯å¢ƒä»‹ç»"><a href="#ç¯å¢ƒä»‹ç»" class="headerlink" title="ç¯å¢ƒä»‹ç»"></a>ç¯å¢ƒä»‹ç»</h2><ul><li><p>nodeJs V10.3.0</p></li><li><p>VueCli V4.5.9</p></li><li><p>Cordova V10.0.0</p></li><li><p>JDK V1.8.0</p></li><li><p>Gradle V6.0.1</p></li><li><p>Android SDK API Level 29</p></li></ul><h2 id="Cordovaå®‰è£…"><a href="#Cordovaå®‰è£…" class="headerlink" title="Cordovaå®‰è£…"></a>Cordovaå®‰è£…</h2><p>æˆ‘ä»¬ä½¿ç”¨npmæ¥å…¨å±€å®‰è£…Cordovaè„šæ‰‹æ¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cordova</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹è½½å®Œæˆåè¾“å…¥cordova -véªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå‡ºç°ç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸ</span></span><br><span class="line">cordova -v  </span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºCordovaé¡¹ç›®"><a href="#åˆ›å»ºCordovaé¡¹ç›®" class="headerlink" title="åˆ›å»ºCordovaé¡¹ç›®"></a>åˆ›å»ºCordovaé¡¹ç›®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®‰è£…å¥½è„šæ‰‹æ¶åï¼Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºCordovaé¡¹ç›®</span></span><br><span class="line">cordova create cordovaVueDemo</span><br><span class="line"><span class="comment">// åˆ›å»ºæˆåŠŸåè¿›å…¥ç›®å½•ï¼Œæ¥ç€æˆ‘ä»¬æ·»åŠ å¹³å°</span></span><br><span class="line">cd cordovaVueDemo</span><br><span class="line">cordova platform add android </span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œè¿™å‡ å¥å‘½ä»¤åæˆ‘ä»¬ä¼šçœ‹åˆ°è¿™æ ·çš„æ–‡ä»¶ç›®å½•ï¼Œè¿™è¾¹æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯platformsã€plugins å’Œwwwæ–‡ä»¶å¤¹ï¼Œä»–ä»¬åˆ†åˆ«å­˜æ”¾å¹³å°æ–‡ä»¶ï¼ˆä¾‹å¦‚Androidã€iosã€browserï¼‰ã€Cordovaæ’ä»¶æ–‡ä»¶å’Œæ‰“åŒ…èµ„æºæ–‡ä»¶</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¾€Cordovaé‡Œé¢é›†æˆVueé¡¹ç›®ï¼Œç›´æ¥åœ¨Cordovaè¿è¡Œå‘½ä»¤åˆ›å»ºVueé¡¹ç›®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create app</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªè¿™æ ·çš„ç›®å½•ï¼Œå…¶ä¸­appæ–‡ä»¶å¤¹å°±æ˜¯vueé¡¹ç›®ï¼Œå¦‚æœæˆ‘ä»¬è¦æŠŠvueé¡¹ç›®æ‰“åŒ…æˆapkï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠvueçš„é™æ€èµ„æºæ–‡ä»¶buildåˆ°Cordovaé¡¹ç›®çš„wwwæ–‡ä»¶å¤¹ä¸­ï¼Œç»å¸¸ä½¿ç”¨Vueçš„å°ä¼™ä¼´ä»¬éƒ½æ¸…æ¥šè¦åœ¨vue.config.jsä¸Šé¢é…ç½®æ‰“åŒ…æ–‡ä»¶è¾“å‡ºç›®å½•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&quot;../www&quot;</span>,</span><br><span class="line">  <span class="attr">assetsDir</span>: <span class="string">&quot;static&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ—¶å€™å°±èƒ½å°†Vueé¡¹ç›®æ‰“åŒ…åˆ°Cordovaä¸­çš„wwwæ–‡ä»¶å¤¹</span></span><br><span class="line">npm run build </span><br></pre></td></tr></table></figure><h2 id="Cordovaé…ç½®ä»‹ç»"><a href="#Cordovaé…ç½®ä»‹ç»" class="headerlink" title="Cordovaé…ç½®ä»‹ç»"></a>Cordovaé…ç½®ä»‹ç»</h2><p>Cordovaä¸»è¦çš„é…ç½®æ–‡ä»¶æ˜¯config.xmlï¼Œå…¶ä¸­appåç§°ã€æ ‡è¯†ã€iconã€å¯åŠ¨å›¾ã€å„ç§æƒé™ç­‰ç­‰éƒ½éœ€è¦æ“ä½œè¯¥æ–‡ä»¶</p><p>å¯åŠ¨å›¾çš„é…ç½®éœ€è¦å®‰è£…cordova-plugin-splashscreenæ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cordova plugin add cordova-plugin-splashscreen</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œå®‰è£…å®Œæ’ä»¶åå¿…é¡»é‡è£…å¹³å°æ‰ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">cordova platform remove android</span><br><span class="line">cordova platform add android </span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&#x27;1.0&#x27;</span> encoding=<span class="string">&#x27;utf-8&#x27;</span>?&gt;</span><br><span class="line"><span class="comment">// id åº”ç”¨ç¨‹åºçš„æ ‡è¯†</span></span><br><span class="line"><span class="comment">// version åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ è¿™ä¸ªç‰ˆæœ¬å·å¯¹åº”é¡¹ç›®çš„å®é™…ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">widget</span> <span class="attr">id</span>=<span class="string">&quot;xxx.xx.xxx&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.0.0&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/ns/widgets&quot;</span> <span class="attr">xmlns:cdv</span>=<span class="string">&quot;http://cordova.apache.org/ns/1.0&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Appåç§°<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">description</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Appä»‹ç»</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">author</span> <span class="attr">email</span>=<span class="string">&quot;xxxxxxxxxx@sina.com&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://xxxxxx.com&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ä½œè€…ä»‹ç»</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">author</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    // åº”ç”¨ç¨‹åºèµ·å§‹é¡µé¢ï¼Œé»˜è®¤index.html</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">content</span> <span class="attr">src</span>=<span class="string">&quot;index.html&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    // ç™½åå• *ä»£è¡¨ä»»ä½•ipéƒ½å¯è®¿é—® ä¹Ÿå¯æŒ‡å®šå…·ä½“åœ°å€</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">access</span> <span class="attr">origin</span>=<span class="string">&quot;*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;http://*/*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;https://*/*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;tel:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;sms:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;mailto:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;geo:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    // é»˜è®¤ä¸ºfalseã€‚å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œåˆ™ä¸ä¼šæ‹‰ä¼¸å›¾ç‰‡æ¥å¡«å……å±å¹•ï¼Œä¼šä»¥å›¾ç‰‡åŸå§‹æ¯”ä¾‹æ˜¾ç¤ºå›¾ç‰‡ã€‚</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">&quot;SplashMaintainAspectRatio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span> </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">platform</span> <span class="attr">name</span>=<span class="string">&quot;android&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;market:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        // app icon</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/36.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;ldpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/48.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;mdpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/72.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;hdpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/96.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;xhdpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/144.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;xxhdpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">src</span>=<span class="string">&quot;resources/icon/192.png&quot;</span> <span class="attr">density</span>=<span class="string">&quot;xxxhdpi&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        // appå¯åŠ¨å›¾</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-hdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/480_800.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-ldpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/200_320.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-mdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/320_480.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-xhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/720_1280.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-xxhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/960_1600.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;port-xxxhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/1280_1920.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-hdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/800_480.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-ldpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/320_200.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-mdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/480_320.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-xhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/1280_720.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-xxhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/1600_960.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">splash</span> <span class="attr">density</span>=<span class="string">&quot;land-xxxhdpi&quot;</span> <span class="attr">src</span>=<span class="string">&quot;resources/splash/1920_1280.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">platform</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">platform</span> <span class="attr">name</span>=<span class="string">&quot;ios&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;itms:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;itms-apps:*&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">platform</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span> </span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/641950adcbe7454088efff102c1e0d8a~tplv-k3u1fbpfcp-zoom-1.image" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="Cordovaæ„å»ºè‡ªç­¾åandroid-APK"><a href="#Cordovaæ„å»ºè‡ªç­¾åandroid-APK" class="headerlink" title="Cordovaæ„å»ºè‡ªç­¾åandroid APK"></a>Cordovaæ„å»ºè‡ªç­¾åandroid APK</h2><p>æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸Šæ–°å»ºä¸€ä¸ªå«keyStoreçš„æ–‡ä»¶å¤¹å­˜æ”¾æˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„ç­¾ååŒ…</p><p>åœ¨keyStoreç›®å½•ä¸Šæ‰§è¡Œå‘½ä»¤ç”Ÿæˆç­¾ååŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -v -keyalg <span class="variable constant_">RSA</span> -keystore xxx.<span class="property">keystore</span> -alias xxx -validity <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">è¾“å…¥å¯†é’¥åº“å£ä»¤:  </span><br><span class="line">å†æ¬¡è¾“å…¥æ–°å£ä»¤: </span><br><span class="line">æ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line">æ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line">æ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line">æ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line">æ‚¨æ‰€åœ¨çš„çœ/å¸‚/è‡ªæ²»åŒºåç§°æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line">è¯¥å•ä½çš„åŒå­—æ¯å›½å®¶/åœ°åŒºä»£ç æ˜¯ä»€ä¹ˆ?</span><br><span class="line">  [<span class="title class_">Unknown</span>]:  </span><br><span class="line"><span class="variable constant_">CN</span>=<span class="title class_">Unknown</span>, <span class="variable constant_">OU</span>=<span class="title class_">Unknown</span>, O=<span class="title class_">Unknown</span>, L=<span class="title class_">Unknown</span>, <span class="variable constant_">ST</span>=<span class="title class_">Unknown</span>, C=<span class="title class_">Unknown</span>æ˜¯å¦æ­£ç¡®?</span><br><span class="line">  [å¦]:  Y</span><br><span class="line"></span><br><span class="line">æ­£åœ¨ä¸ºä»¥ä¸‹å¯¹è±¡ç”Ÿæˆ <span class="number">2</span>,<span class="number">048</span> ä½<span class="variable constant_">RSA</span>å¯†é’¥å¯¹å’Œè‡ªç­¾åè¯ä¹¦ (<span class="title class_">SHA256</span>withRSA) (æœ‰æ•ˆæœŸä¸º <span class="number">1</span>,<span class="number">000</span> å¤©):</span><br><span class="line">   <span class="variable constant_">CN</span>=<span class="title class_">Unknown</span>, <span class="variable constant_">OU</span>=<span class="title class_">Unknown</span>, O=<span class="title class_">Unknown</span>, L=<span class="title class_">Unknown</span>, <span class="variable constant_">ST</span>=<span class="title class_">Unknown</span>, C=<span class="title class_">Unknown</span></span><br><span class="line">è¾“å…¥ &lt;xxx&gt; çš„å¯†é’¥å£ä»¤</span><br><span class="line">  (å¦‚æœå’Œå¯†é’¥åº“å£ä»¤ç›¸åŒ, æŒ‰å›è½¦):  </span><br><span class="line">[æ­£åœ¨å­˜å‚¨xxx.<span class="property">keystore</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// PSï¼šè¿™é‡Œé™¤äº†å¯†é’¥åº“å£ä»¤æ˜¯å¿…é¡»è¦å†™çš„ï¼Œå…¶ä»–éƒ½å¯ä»¥ä¸ºç©ºï¼Œä¸€èˆ¬è¿™æ¡å‘½ä»¤æˆ‘ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œç”Ÿæˆä¸€ä¸ªreleaseè·Ÿä¸€ä¸ªdebugçš„ç­¾ååŒ…</span></span><br><span class="line">keytool -genkey -v -keyalg <span class="variable constant_">RSA</span> -keystore debug.<span class="property">keystore</span> -alias debug -validity <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥ä¸‹æ¥è¿˜éœ€è¦åœ¨è·Ÿç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªbuild.jsonï¼Œè¯¥æ–‡ä»¶ä¸»è¦æ˜¯é…ç½®ç­¾ååŒ…ï¼Œåœ¨cordovaå®˜ç½‘æœ‰è¯´åˆ°https://cordova.apache.org/docs/en/10.x/guide/platforms/android/index.html#using-buildjson</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;android&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;debug&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;keystore&quot;</span>: <span class="string">&quot;keystore/debug.keystore&quot;</span>, <span class="comment">// ç­¾ååŒ…å</span></span><br><span class="line">      <span class="string">&quot;storePassword&quot;</span>: <span class="string">&quot;******&quot;</span>, <span class="comment">// å¯†é’¥åº“å¯†ç </span></span><br><span class="line">      <span class="string">&quot;alias&quot;</span>: <span class="string">&quot;debug&quot;</span>, <span class="comment">// åˆ«å</span></span><br><span class="line">      <span class="string">&quot;password&quot;</span>: <span class="string">&quot;******&quot;</span>, <span class="comment">// ç­¾ååŒ…å¯†ç </span></span><br><span class="line">      <span class="string">&quot;keystoreType&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;release&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;keystore&quot;</span>: <span class="string">&quot;keystore/xxx.keystore&quot;</span>,</span><br><span class="line">      <span class="string">&quot;storePassword&quot;</span>: <span class="string">&quot;******&quot;</span>,</span><br><span class="line">      <span class="string">&quot;alias&quot;</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">      <span class="string">&quot;password&quot;</span>: <span class="string">&quot;******&quot;</span>,</span><br><span class="line">      <span class="string">&quot;keystoreType&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åšå®Œä¸Šé¢ä¸€ç³»åˆ—æ“ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ„å»ºAndroid Apkäº†</p><h2 id="Cordovaæ„å»ºAndroid-Apk"><a href="#Cordovaæ„å»ºAndroid-Apk" class="headerlink" title="Cordovaæ„å»ºAndroid Apk"></a>Cordovaæ„å»ºAndroid Apk</h2><p>åœ¨æ„å»ºApkä¹‹å‰è¦å…ˆç¡®è®¤æˆ‘ä»¬æ˜¯å¦å®‰è£…äº†Androidå¹³å°ï¼Œï¼Œæœ€ç›´æ¥çš„æ–¹æ³•å°±æ˜¯æŸ¥çœ‹platformsæ–‡ä»¶å¤¹é‡Œé¢æ˜¯å¦æœ‰androidæ–‡ä»¶å¤¹ï¼Œæœ‰çš„è¯å°±è¯´æ˜å·²ç»å®‰è£…ï¼Œè‹¥æ²¡æœ‰å°±æ‰§è¡Œå‘½ä»¤å®‰è£…ä¸€ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cordova platform add android <span class="comment">// è¿™æ ·ä¸€èˆ¬é»˜è®¤å®‰è£…çš„éƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">cordova platform add android@xxx <span class="comment">// è‹¥éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬éœ€åœ¨åé¢åŠ ä¸Šç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œæ„å»ºå‘½ä»¤</span></span><br><span class="line">cordova build android <span class="comment">// debugç‰ˆæœ¬</span></span><br><span class="line">cordova build android -release <span class="comment">// æ­£å¼ç‰ˆ/å‘å¸ƒç‰ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œèƒ½çœ‹åˆ°successfulå­—æ ·å¹¶ç»™å‡ºapkè·¯å¾„æ—¶ï¼Œä»£è¡¨æ„å»ºæˆåŠŸ </span></span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/051c49a0252946b4ae392a8e555528b9~tplv-k3u1fbpfcp-zoom-1.image" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="æ„å»ºapkå¸¸è§çš„ä¸€äº›é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"><a href="#æ„å»ºapkå¸¸è§çš„ä¸€äº›é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•" class="headerlink" title="æ„å»ºapkå¸¸è§çš„ä¸€äº›é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"></a>æ„å»ºapkå¸¸è§çš„ä¸€äº›é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// gradleæ–‡ä»¶ä¸‹è½½å¤±è´¥ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼ŒåŸå› æ˜¯å› ä¸ºç½‘ç»œé—®é¢˜ï¼Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç§‘å­¦ä¸Šç½‘</span></span><br><span class="line"><span class="attr">FAILURE</span>: <span class="title class_">Build</span> failed <span class="keyword">with</span> an exception.</span><br><span class="line"></span><br><span class="line">* <span class="title class_">What</span> went <span class="attr">wrong</span>:</span><br><span class="line">A problem occurred configuring root project <span class="string">&#x27;android&#x27;</span>.</span><br><span class="line">&gt; <span class="title class_">Could</span> not resolve all artifacts <span class="keyword">for</span> configuration <span class="string">&#x27;:classpath&#x27;</span>.</span><br><span class="line">   &gt; <span class="title class_">Could</span> not download proguard-gradle-<span class="number">6.0</span><span class="number">.3</span>.<span class="property">jar</span> (net.<span class="property">sf</span>.<span class="property">proguard</span>:proguard-<span class="attr">gradle</span>:<span class="number">6.0</span><span class="number">.3</span>)</span><br><span class="line">      &gt; <span class="title class_">Could</span> not get resource <span class="string">&#x27;https://jcenter.bintray.com/net/sf/proguard/proguard-gradle/6.0.3/proguard-gradle-6.0.3.jar&#x27;</span>.</span><br><span class="line">         &gt; <span class="title class_">Could</span> not <span class="variable constant_">GET</span> <span class="string">&#x27;https://jcenter.bintray.com/net/sf/proguard/proguard-gradle/6.0.3/proguard-gradle-6.0.3.jar&#x27;</span>.</span><br><span class="line">            &gt; java.<span class="property">net</span>.<span class="property">SocketException</span>: <span class="title class_">Connection</span> reset </span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line"><span class="comment">// å­—é¢ä¸Šæ„æ€ï¼Œä¸èƒ½è§£å‹è¿™ä¸ªåŒ…ï¼Œæˆ‘å°è¯•è¿‡ç›´æ¥æŠŠå®ƒè§£å‹å®Œäº†å†æ”¾å›å»ï¼Œç»“æœæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æœ‰å‡ æ¬¡ä¸è¡Œï¼Œæ‰€ä»¥æˆ‘ç›´æ¥è¿›å…¥ç›®å½•æŠŠè¿™ä¸ªåŒ…åˆ äº†åœ¨é‡æ–°æ‰§è¡Œæ‰“åŒ…å‘½ä»¤        </span></span><br><span class="line"><span class="title class_">Unzipping</span> <span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="variable constant_">HD</span>\.<span class="property">gradle</span>\wrapper\dists\gradle-<span class="number">2.13</span>-all\7hsc6vr6mi3i6i5m7q9hj4ci1q\gradle-<span class="number">2.13</span>-all.<span class="property">zip</span> to <span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="variable constant_">HD</span>\.<span class="property">gradle</span>\wrapper\dists\gradle-<span class="number">2.13</span>-all\7hsc6vr6mi3i6i5m7q9hj4ci1q</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜æœ‰ä¸€ç§å°±æ˜¯ä¸€ç›´å¡åœ¨ä¸‹è½½æŸä¸ªæ–‡ä»¶çš„åœ°æ–¹downloadï¼Œæœ€åè¶…æ—¶å¯¼è‡´å¤±è´¥ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯</span></span><br><span class="line">downloading <span class="attr">https</span>:<span class="comment">//xxxxxxxxxxx.com</span></span><br><span class="line">xxxxxxxxxæ–‡ä»¶è·¯å¾„</span><br><span class="line"><span class="comment">// ä»–æ˜¯æœ‰ä¸ªæ–‡ä»¶é“¾æ¥å’Œæ–‡ä»¶ä¸‹è½½åå­˜æ”¾çš„è·¯å¾„ç»™ä½ çš„ï¼Œæˆ‘ä¸€èˆ¬çš„åšæ³•æ˜¯ç›´æ¥å»ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ç„¶åæ”¾åˆ°è¿™ä¸ªè·¯å¾„ä¸Šï¼Œå†æ¬¡æ‰§è¡Œæ‰“åŒ…å‘½ä»¤æ—¶ä»–ä¼šæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶çš„å­˜åœ¨ï¼Œå­˜åœ¨çš„è¯ä»–å°±ä¸ä¼šå†å»ä¸‹è½½äº†</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> cordova </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cordova </tag>
            
            <tag> Vue </tag>
            
            <tag> Hybird App </tag>
            
            <tag> App å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
